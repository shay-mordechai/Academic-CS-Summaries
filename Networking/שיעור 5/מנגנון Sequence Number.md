### [מנגנון -]{dir="rtl"} Sequence numbers[:]{dir="rtl"}

> [מספרי רצף]{dir="rtl"} [שומרים על סדרם הנכון של הסיגמנטים המועברים.\
> לכל בייט של]{dir="rtl"} [נתונים מוקצה מספר רצף ייחודי, כך
> שהמקבל]{dir="rtl"} [מאשר קבלת נתונים]{dir="rtl"} [ע\"י]{dir="rtl"}
> [שליחת מספר]{dir="rtl"} ACK [המרמז על מספר ה]{dir="rtl"}seq [של
> הסיגמנט הבא שהוא מצפה לקבל.\
> ה]{dir="rtl"}seq number [הראשון, נבחר באקראי אצל מערכת
> ההפעלה.]{dir="rtl"}
>
> [כאשר כל הסיגמנטים מגיעים ליעדם (ל]{dir="rtl"}buffer [של המקבל),
> ה]{dir="rtl"}TCP [אצל המקבל יודע לחבר את כל הסיגמנטים לחבילה המקורית,
> עפ\"י מספרי ה]{dir="rtl"}seq[.\
> \
> דוגמא לאמצע שיחה המתרחשת בין שני מארחים - שולח]{dir="rtl"} A
> [ומקבל]{dir="rtl"} B[:]{dir="rtl"}
>
> ![](image51.png){width="4.941666666666666in"
> height="2.2in"}
>
> [במקרה זה, כל סיגמנט מכיל מידע של תו אחד בלבד, כלומר 1 בייט
> (]{dir="rtl"}char[).\
> לכן מספר הרצף הבא יהיה]{dir="rtl"} n+1 [(כאשר]{dir="rtl"} n [זה
> ה]{dir="rtl"}seq [ההתחלתי).\
> מארח]{dir="rtl"} A [שלח סיגמנט עם רצף 42, לכן מחשב]{dir="rtl"} B [מצפה
> שהסיגמנט הבא שישלח אליו יהיה 43, וכך מארח]{dir="rtl"} A [יודע שהמידע
> ששלח הגיע ליעדו, ואפשר להמשיך לשלוח.]{dir="rtl"}
>
> [\*אמנם ב]{dir="rtl"}TCP [אין הודעת]{dir="rtl"} ACK [על כל סיגמנט
> בודד, כפי שנראה בהמשך.]{dir="rtl"}
>
> [ ]{dir="rtl"}
>
> [דוגמא נוספת:]{dir="rtl"}
>
> ![](image52.png){width="5.0in"
> height="3.466666666666667in"}
>
> [השולח, מעביר סיגמנט בגודל 21 בייטים, לכן ה]{dir="rtl"}seq [שלו מתחיל
> ב597 ומסתיים ב618.]{dir="rtl"}
>
> [המקבל (בחץ השני), מעביר סיגמנט עם מספר]{dir="rtl"} ACK [המציין את
> תחילת הרצף של הסיגמנט הבא - 618.]{dir="rtl"}
>
> [השולח, מתחיל את ההודעה הבאה ב]{dir="rtl"}seq [618, לאחר שהבין שההודעה
> הקודמת הגיעה ליעדה.]{dir="rtl"}
>
> [ ]{dir="rtl"}
>
> [הערה:]{dir="rtl"}
>
> [לא נשתמש באותו רצף של סדרה במשך יותר מ3 דקות. מה הסיבה?]{dir="rtl"}
> TTL [- בשלב מסויים, הנתבים יזרקו את החבילה לפח, עד 3 דקות. כמה זמן יקח
> לעבור 256 נתבים? מקסימום 3 דקות. זה מונע בעיה של העברת חבילה לאותו
> הנתב בלולאה, שלאחר 256 סיבובים החבילה נזרקת.]{dir="rtl"}
>
> [\
> כדי לתקוף שרת, אפשר להתחיל שיחה איתו.]{dir="rtl"}
>
> [כיצד למנוע זאת?]{dir="rtl"}

-   [פתרון: אגביל את מספר הבקשות שאפשר לשלוח ממקום מסויים.]{dir="rtl"}

-   [פתרון נוסף: ברגע שאני מזהה]{dir="rtl"} IP [חשוד, ניתן לחסום
    אותו.]{dir="rtl"}

> [מנגנון]{dir="rtl"} TCP [קשה יותר לפרוץ בזכות כל המנגנונים והפילטרים
> הקיימים אצלו.]{dir="rtl"}
>
> [האקרים טובים, שולחים מידי יום מעט בקשות ולא את כולן יחד, כדי שלא
> יחסמו אותם.]{dir="rtl"}

-   [פתרון נוסף: הכנת]{dir="rtl"} sequence coockie[. אם נשלחה אליי בקשה,
    אוכל לשלוח]{dir="rtl"} sequence [מזוייף, ורק אם תחזור אליי בקשה, אז
    אקצה משאבים באמת ואשלח לו מידע. זה נקרא]{dir="rtl"} SYN
    cookie[.]{dir="rtl"}

> [ ]{dir="rtl"}
