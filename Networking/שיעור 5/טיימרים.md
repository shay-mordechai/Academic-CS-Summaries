### TCP timers[:]{dir="rtl"}

[יש ארבעה סוגי טיימרים.]{dir="rtl"}

1.  [Time-Wait]{.underline}[:\
    טיימר זה משמש להמתנה לפרק זמן לאחר סגירת]{dir="rtl"} [חיבור
    ה]{dir="rtl"}-TCP [במיוחד לאחר שלב]{dir="rtl"} FIN-ACK. [משך ברירת
    המחדל שלו הוא בערך 2 דקות]{dir="rtl"}. [במהלך תקופה זו, נקודת הקצה
    לא יכולה ליזום חיבור חדש עם אותם מספרי יציאות]{dir="rtl"} TCP.
    [טיימר זה מבטיח שכל חבילות מושהות מהחיבור הקודם לא יתחשבו בטעות
    כמנות]{dir="rtl"} [חדשות בניסיון החיבור הבא]{dir="rtl"}.

> [ ]{dir="rtl"}

2.  [Keppalive timer]{.underline}[:]{dir="rtl"}

> [טיימר זה מוגדר בדרך כלל לשעתיים. בתום תקופה]{dir="rtl"} [זו, השרת
> שולח מספר מנות (בדרך כלל 10 בדיקות,]{dir="rtl"} probs[)]{dir="rtl"}
> [כדי לבדוק אם הלקוח עדיין]{dir="rtl"} [\"חי\"]{dir="rtl"} [ורוצה לשלוח
> נתונים. אם לא מתקבלת תגובה, השרת]{dir="rtl"} [מפסיק את החיבור. טיימר
> זה עוזר לזהות חיבורים לא פעילים ולמנוע מהם לבזבז משאבי]{dir="rtl"}
> [רשת]{dir="rtl"}.
>
> [ ]{dir="rtl"}

3.  [Persist timer]{.underline}[: טיימר זה משמש לניהול השידור של
    בדיקות]{dir="rtl"} [חלונות. בכל 3 שניות בד\"כ, המקבל בודק את עומס
    הרשת, ומעדכן את גודל החלון בהתאם.]{dir="rtl"}\
    [מקרה מיוחד:]{dir="rtl"}

    a.  [אם גודל החלון של המקלט הוא 0, השולח]{dir="rtl"}
        [ישלח]{dir="rtl"} [חבילת]{dir="rtl"} [בדיקה של]{dir="rtl"}
        [החלון המעודכן]{dir="rtl"} [לאחר פרק זמן מסוים,]{dir="rtl"}
        [באמצעות]{dir="rtl"} [טיימר זה]{dir="rtl"}.

    b.  [אם]{dir="rtl"} [המקבל]{dir="rtl"} [עדיין לא]{dir="rtl"} [מוכן,
        הטיימר מוכפל עד שמגיעים לסף]{dir="rtl"} [(בדרך כלל]{dir="rtl"}
        60 [שניות). לאחר מכן, השולח שולח קטע בדיקה כל 60 שניות עד שהמקלט
        מוכן]{dir="rtl"} [לקבל שוב נתונים]{dir="rtl"}.

        -   [הסיבה:]{dir="rtl"} [כדי לשמור על החיבור כך]{dir="rtl"}
            [שהוא לא ייסגר עקב]{dir="rtl"} [סיום ה]{dir="rtl"}timeout
            [ושליחת ה]{dir="rtl"}RST [לסיום מיידי של
            ההתחברות.]{dir="rtl"} [עם זאת, אם לא אשלח שום דבר, לא אוכל
            לחדש את התקשורת.]{dir="rtl"}

> ![](image58.png){width="3.0083333333333333in"
> height="2.6666666666666665in"}
>
> [במקרה זה, המקבל הבחין שהוא עמוס ועליו לצמצם את גודל החלון מ6 ל4.\
> במקביל, גם שולח]{dir="rtl"} ACK-5 [כדי לאשר שקיבל את הסיגמנטים 3 ו4.\
>  ]{dir="rtl"}

4.  [RTO]{.underline}[: טיימר]{dir="rtl"} [השידור החוזר.]{dir="rtl"}

    a.  [טיימר זה משמש לזיהוי מנות אבודות שלא אושרו ע\"י]{dir="rtl"}
        [המקבל]{dir="rtl"}. [\
        אם השולח לא מקבל]{dir="rtl"} ACK [בתוך]{dir="rtl"} [פרק זמן
        מסוים, הוא משדר מחדש את החבילה]{dir="rtl"}.

    b.  [מוגדר]{dir="rtl"} [בד\"כ]{dir="rtl"} [לערך]{dir="rtl"} [הגדול
        מזמן ההחזרה הצפוי בין השולח]{dir="rtl"} [למקבל.]{dir="rtl"}

    c.  [[חשוב לזכור]{.underline}: הוא מותאם באופן דינמי על סמך תנאי
        הרשת המשוערים, כגון עומס]{dir="rtl"} [ואובדן מנות]{dir="rtl"}.

    d.  Timeout [חייב להיות יותר מ]{dir="rtl"}RTT[, כדי שאספיק לשדר\*\
         ]{dir="rtl"}

> [במערכת ההפעלה יש משתנה **דינאמי** שדוגם בכל פעם כמה זמן לקח מאז
> השליחה עד ה]{dir="rtl"}RTT[.\
> מכיוון שהמשתנה הזה יכול להשתבש בגלל עומסים, נעשה ממוצע משוכלל.\
> הדגימה האחרונה מבטא את המצב העכשוי, אך גם אני לא רוצה להיחשף לשיבושים
> ברשת שאולי יש עכשיו. לכן אתן משקל גדול לקודמים, כדי לשקף יותר את
> הפעימה האחרונה.]{dir="rtl"}
>
> [ ]{dir="rtl"}
>
> **[מושגים נוספים:]{dir="rtl"}**
>
> **RTT**[: יחידת מדידה \"זמן הלוך חזור\", מאז ששלחתי חבילה ועד שהגיבו
> לי.]{dir="rtl"}
>
> [השימוש בחלון ובטיימרים, נועד לעקוב אחר מנות נתונים]{dir="rtl"}
> [שנשלחו והתקבלו.]{dir="rtl"}

-   [יתרון:]{dir="rtl"} [תפוקה גבוהה יותר. ה]{dir="rtl"}RTT [נמוך בד\"כ
    כי אין המתנה ארוכה לשליחת מנות חדשות. במקרה והרשת איטית, עדיין
    ה]{dir="rtl"}RTT [עשוי להיות גבוה.]{dir="rtl"}

-   [חסרון: מורכבת יותר. תתאים יותר ליישומים הדורשים העברת נתונים
    מהירה.]{dir="rtl"}

> [ ]{dir="rtl"}\
> **MSS**[:]{dir="rtl"} [גודל המקטע המקסימלי (]{dir="rtl"}MSS[) הוא
> הכמות המקסימלית של נתונים שניתן לשאת בסיגמנט]{dir="rtl"} TCP [בודד,
> למעט כותרת ה-]{dir="rtl"}TCP[.\
>  ]{dir="rtl"}
>
> [ ]{dir="rtl"}

