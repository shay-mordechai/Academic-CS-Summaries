
> [לקביעת המסלול היעיל ביותר.]{dir="rtl"}

-   **[[אלגוריתם]{dir="rtl"} link state]{.underline}**[: משתמש באלגוריתם
    של דיסקטרה, כדי להחליף מידע בין צמתים ולחשב את הנתיב הקצר ביותר
    מצומת מקור לכל שאר הצמתים ברשת, בהתחשב בעלויות הנתיב המצטברות.\
    שיתוף המידע מתבצע רק בכל פעם שיש שינוי.]{dir="rtl"}

    -   [מבנה מרחב הרשת ועלויות הקישור ידועות לכל הצמתים.]{dir="rtl"}

    -   [כל צומת משדר את **מידע מצב הקישור** שלו לכל שאר הצמתים ברשת.
        באמצעות מידע זה, כל צומת יכול לחשב בסבב אחד, את הנתיבים בעלות
        הנמוכה ביותר - ממנו לכל שאר הצמתים ברשת. חישוב זה מביא לטבלת
        העברה המציינת את הקפיצה הבאה עבור כל יעד.\
        ברגע שלכולם יש את אותם]{dir="rtl"} [נתונים, כולם מבצעים את אותו
        אלגוריתם ומייצרים טבלאות ניתוב זהות.]{dir="rtl"}

    -   [הפצת המידע שמבצע כל נתב]{dir="rtl"} [מושגת באמצעות]{dir="rtl"}
        multicast, [כאשר נתבים מאזינים לכתובת]{dir="rtl"} IP [ספציפית
        לעדכונים. כל נתב מדווח על כל הרשתות המחוברות ישירות]{dir="rtl"}.

> ![](image96.png){width="2.533333333333333in"
> height="2.6in"}
>
> ![](Summeries/מבוא%20לרשתות%20מחשבים/media/media/image97.png){width="5.0in" height="2.8in"}
>
> [מעקב אחר הטבלה:]{dir="rtl"}
>
> [מתחילים מצומת המקור]{dir="rtl"} u [עד צומת היעד]{dir="rtl"} z[.\
> ]{dir="rtl"}D[(צומת]{dir="rtl"}( [מסמל את המרחק מהמקור עד לצומת באות
> המצויינת, למשל]{dir="rtl"} D(v)[.\
> ]{dir="rtl"}P[(צומת) מסמל את הקודקוד הקודם שדרכו הגענו.
> למשל]{dir="rtl"} P(y) [יהיה]{dir="rtl"} x[.\
> מתחילים עם השכן הפיזי של צומת המקור והשכנים הרחוקים מרחקם יהיה אינסוף
> בנתיים. בכל צעד מתקדמים לשכן הבא.\
> ]{dir="rtl"}N\' [מסמל את הצמתים שטיפלנו בהם עד כה.]{dir="rtl"}
>
> ![](image98.png){width="3.408333333333333in"
> height="3.225in"}
>
> [יתרונות:]{dir="rtl"}

-   [מספקים מידע עדכני על הרשת.]{dir="rtl"}

-   [הסתגלות לשינויים ברשת - במקרה של כשל, נתבים יכולים לעדכן במהירות את
    טבלאות הניתוב.]{dir="rtl"}

-   [ניתן ליישם]{dir="rtl"} [בקלות יחסית]{dir="rtl"}.

> [חסרונות]{dir="rtl"}:

-   [תהליך ההחלפה והעדכון של מידע רשת יכול להיות גוזל זמן ומשאבים,
    במיוחד ברשתות גדולות.]{dir="rtl"}

-   [דורש יותר זיכרון וכוח עיבוד בכל נתב כדי לאחסן ולתחזק את מפת הרשת
    השלמה.]{dir="rtl"}

-   [ייתכן שהוא לא משתנה ביעילות עבור רשתות גדולות מאוד עם מספר גבוה של
    נתבים.]{dir="rtl"}

-   [עומס תנועה כבד עקב הצפה של מנות.]{dir="rtl"}

-   [הצפה יכולה לגרום ללולאה אינסופית שניתן לפתור באמצעות
    השדה]{dir="rtl"} TTL[.]{dir="rtl"}

> [ ]{dir="rtl"}

-   [**אלגוריתם וקטור מרחק**: זהו אלגוריתם ניתוב דינמי שבו כל נתב מחשב
    מרחק בינו לבין כל יעד אפשרי כלומר השכנים המיידיים שלו.]{dir="rtl"}

> [הנתב חולק את הידע שלו על כל הרשת לשכניו ובהתאם לכך מעדכן את הטבלה
> בהתאם לשכניו.]{dir="rtl"}
>
> [שיתוף המידע עם השכנים מתבצע במרווחי זמן קבועים.]{dir="rtl"}
>
> [הוא עושה שימוש באלגוריתם בלמן-פורד להכנת טבלאות ניתוב.]{dir="rtl"}
>
> [כל צומת מבצע איטרציות מקומיות כאשר יש שינוי בעלות הקישור המקומי או
> כאשר הוא מקבל הודעת עדכון וקטור מרחק משכניו. צמתים מודיעים לשכניהם רק
> כאשר וקטורי המרחק שלהם משתנים. האלגוריתם מתכנס כאשר לא מתרחשים שינויים
> נוספים בוקטורי המרחק.]{dir="rtl"}
>
> [ ]{dir="rtl"}
>
> [מצב התחלתי:]{dir="rtl"}
>
> ![](image99.png){width="4.333333333333333in"
> height="1.825in"}
>
> [שלב 2:]{dir="rtl"} D [מעדכן את]{dir="rtl"} E
>
> ![](image100.png){width="4.316666666666666in"
> height="2.3in"}
>
> [שלב 3:]{dir="rtl"} B [מעדכן את]{dir="rtl"} A
>
> ![](image101.png){width="4.325in" height="2.2in"}
>
> [שלב 4:]{dir="rtl"} E [מעדכן את]{dir="rtl"} A
>
> ![](image102.png){width="4.291666666666667in"
> height="2.316666666666667in"}
>
> [שלב סופי:\
> ]{dir="rtl"}B [מעדכן את]{dir="rtl"} C[,]{dir="rtl"} E [מעדכן
> את]{dir="rtl"} D[,]{dir="rtl"} D [מעדכן את]{dir="rtl"} C[\.... עד
> התכנסות.]{dir="rtl"}
>
> ![](image103.png){width="4.316666666666666in"
> height="1.825in"}
>
> [\
>  ]{dir="rtl"}
>
> [יתרונות:]{dir="rtl"}

-   [דורש מידע מקומי ומינימאלי על הרשת, כל נתב ושכניו.]{dir="rtl"}

-   [הסתגלות לשינויים ברשת - במקרה של תקלה, צמתים שכנים]{dir="rtl"}
    [יכולים לזהות את הכשל באמצעות היעדר עדכונים או עלויות מוגברות ולנתב
    את]{dir="rtl"} [התנועה באופן דינמי לאורך נתיבים חלופיים.]{dir="rtl"}

-   [עמידות בפני כשלים - אם צומת או קישור נכשלים, האופי המבוזר מאפשר
    לצמתים אחרים להסתגל באופן דינמי ולמצוא נתיבים חלופיים.]{dir="rtl"}

> [חסרונות]{dir="rtl"}:

-   [קבלת החלטות ניתוב באופן מקומי, מבלי להתחשב בתצורת הרשת הגלובלית -
    עשוי להיות לא יעיל.]{dir="rtl"}

-   [עלות גבוהה - כל צומת צריכה לבצע חישובים בודדים ולתחזק מידע ניתוב
    בעצמה.]{dir="rtl"}

-   [איטיות - לוקח יותר זמן להתכנס (להצליב את מידע) בהשוואה לאלגוריתמים
    ריכוזיים. מאט את ההסתגלות של הרשת למצבים משתנים.]{dir="rtl"}

-   [מורכבים יותר לתכנון ויישום בשל האופי המבוזר של המערכת.\
     ]{dir="rtl"}

### [בעיית]{dir="rtl"} count to infinity

> [יש בעיה מרכזית של ניתוב לולאות, מכיוון שאלגוריתם]{dir="rtl"}
> Bellman-Ford [אינו יכול למנוע לולאות. בעיית ה-]{dir="rtl"}Count to
> Infinity [נובעת מלולאת הניתוב ברשת זו של]{dir="rtl"} Distance Vector
> Routing(DVR)[. לולאות ניתוב כאלה מתרחשות בדרך כלל כאשר 2 נתבים שולחים
> עדכון יחד בו זמנית או כאשר ממשק נופל.]{dir="rtl"}
>
> ![](image104.png){width="2.841666666666667in"
> height="0.55in"}
>
> [הקשר בין]{dir="rtl"} B [ל-]{dir="rtl"}C [מתנתק. במקרה זה,]{dir="rtl"}
> B [ידע שהוא כבר לא יכול להגיע ל-]{dir="rtl"}C [בעלות של 1, ויעדכן את
> הטבלה שלו בהתאם. עם זאת, **[יכול להיות
> ש-]{.underline}**]{dir="rtl"}**[A [שולח מידע כלשהו
> ל-]{dir="rtl"}B]{.underline} [שאפשר להגיע ל-]{dir="rtl"}C
> [מ-]{dir="rtl"}A** [בעלות של 2. ואז, מכיוון ש-]{dir="rtl"}B [יכול
> להגיע ל-]{dir="rtl"}A [בעלות של 1,]{dir="rtl"} B [יעדכן בטעות את הטבלה
> שלו שהוא יכול להגיע ל-]{dir="rtl"}C [דרך]{dir="rtl"} A [בעלות של 1 + 2
> = 3 יחידות. לאחר מכן]{dir="rtl"} A [יקבל עדכונים מ-]{dir="rtl"}B
> [ויעדכן את העלויות שלו ל-4 וכו\'. כך, התהליך נכנס ללופ של משוב רע. כל
> המצב הזה נקרא \"בעיית הספירה עד האינסוף\".]{dir="rtl"}
>
> [ ]{dir="rtl"}
>
> [**2 פתרונות**:]{dir="rtl"}

-   Split horizon rule[: חוק שלפיו אסור לנתב לדווח על נתיב שכבר לא
    פעיל.\
    בדוגמא לעיל,]{dir="rtl"} A [לא ידווח ל]{dir="rtl"}B [על
    המסלול]{dir="rtl"} A-\>B-\>C[.]{dir="rtl"}

> ![](image105.png){width="4.65in"
> height="2.716666666666667in"}
>
> [ ]{dir="rtl"}

-   Poison Reverse[: היפוך רעל, הגדרת המסלול הפגום ל16, כדי שהנתב יבין
    שהמרחק אליו הוא אינסוף, ולא ישלח מסלול דרכו.]{dir="rtl"}

> ![](image106.png){width="4.575in" height="2.575in"}
>
> [פתרונות אלה הם נפרדים אך עובדים ביחד.]{dir="rtl"}
>
> [ ]{dir="rtl"}
>
> [שאלה למחשבה:]{dir="rtl"}
>
> [מדוע לא מספיק רק אחד מהפתרונות?]{dir="rtl"}
>
> [תשובה:]{dir="rtl"}

-   [הרעלה לאחור, לא מספיקה לבד מפני ש]{dir="rtl"}

-   [חוק הפצת השמועות, לא מספיק לבד במקרים בהם יש יותר מנתיב אחד, ברשתות
    עם מסלולי ניתוב רבים. במקרים כאלה, נשלב הרעלה לאחור כדי ליידע
    במהירות נתבים שכנים על חוסר הגישה של נתיבים מסוימים ולהקל על התכנסות
    מהירה יותר.]{dir="rtl"}

> [דוגמא: כאשר יש הרעלה לאחור, אך אין חוק הפצת שמועות:]{dir="rtl"}
>
> ![](image107.png){width="3.9166666666666665in"
> height="1.9166666666666667in"}
>
> [ ]{dir="rtl"}
>
> [דוגמא: כאשר יש חוק הפצת שמועות, אך אין הרעלה לאחור:]{dir="rtl"}
>
> ![](image108.png){width="1.725in" height="1.1in"}
>
> A[-\>]{dir="rtl"}C[-\>]{dir="rtl"}B[-\>]{dir="rtl"}A[\
> ]{dir="rtl"}A[-\>]{dir="rtl"}D[-\>]{dir="rtl"}B[-\>]{dir="rtl"}A

-   [כאשר החיבור בין נתבים]{dir="rtl"} C [ו-]{dir="rtl"}B
    [נכשל]{dir="rtl"} [(כנראה עקב כשל בנתב]{dir="rtl"} B[,
    כי]{dir="rtl"} C [עדיין מחובר ל]{dir="rtl"}A[), נתיב]{dir="rtl"}
    A-\>C-\>B [אינו זמין עוד. חוק הפצת השמועות מונע מנתב]{dir="rtl"} A
    [לפרסם את המסלול הזה בחזרה לנתב]{dir="rtl"} C[, מה שעוזר למנוע
    לולאות ניתוב.\
    עם זאת, לנתב]{dir="rtl"} A [עדיין יש נתיב חלופי להגיע
    לנתב]{dir="rtl"} B [(]{dir="rtl"}A-\>D-\>B[).]{dir="rtl"}

-   [אם לא היינו משתמשים ברעל הפוך, זה מה שהיה קורה:\
    נתב]{dir="rtl"} C[, עם קבלת המידע מהנתב]{dir="rtl"} A[, יוסיף את
    המסלול]{dir="rtl"} A-\>D-\>B [לטבלת הניתוב שלו כנתיב חוקי להגיע
    ל-]{dir="rtl"}B[.]{dir="rtl"}

> [כעת, אם נתב]{dir="rtl"} C [היה מעביר מנות המיועדות ל-]{dir="rtl"}B
> [בחזרה לנתב]{dir="rtl"} A [דרך הנתיב]{dir="rtl"} A-\>D-\>B[, זה היה
> יוצר לולאת ניתוב. נתב]{dir="rtl"} A [ימשיך לקבל מנות מהנתב]{dir="rtl"}
> C [ולהעביר אותן בחזרה לנתב]{dir="rtl"} C[, וכתוצאה מכך לולאה
> אינסופית.]{dir="rtl"}

-   [השימוש בהרעלה לאחור, מונע מ]{dir="rtl"}A [לדווח ל]{dir="rtl"}C [על
    המסלול הנוסף, כמסלול חוקי ל-]{dir="rtl"}B[.]{dir="rtl"}

> [ ]{dir="rtl"}
>
> )[אמנם יש מקרים בהם נרצה להימנע משימוש ברעל הפוך. להמשך קריאת מאמר על
> זה]{dir="rtl"}
> ([[https://www.catchpoint.com/dynamic-routing-protocols/split-horizon]{.underline}](https://www.catchpoint.com/dynamic-routing-protocols/split-horizon)\
> [ ]{dir="rtl"}

-   [**ניתוב סטטי**: מנהל הרשת מגדיר באופן ידני את טבלאות הניתוב של
    הנתבים, ומציין את הנתיבים שמנות צריכות לקחת כדי להגיע
    ליעדן.]{dir="rtl"} [עדכונים נשלחים מעת לעת לכל הנתבים.\
    יתרונות:]{dir="rtl"}

    -   [פשוט להגדרה ולניהול - אין צורך באלגוריתם ניתוב]{dir="rtl"}.

    -   [שליטה מלאה על זרימת התעבורה.]{dir="rtl"}

    -   [דורש פחות משאבים מכיוון שאין צורך שנתבים יחליפו מידע ניתוב או
        יחשבו מסלולים.]{dir="rtl"}

    -   [יעל ברשתות קטנות שאינן משתנות הרבה]{dir="rtl"}.

> [חסרונות:]{dir="rtl"}

-   [חוסר הסתגלות - אינו מתעדכן בזמן אמת.]{dir="rtl"}

-   [לא יעיל בסביבות דינאמיות.]{dir="rtl"}

-   [קושי בלעדכן רשתות גדולות עם הרבה נתבים.]{dir="rtl"}

> [ ]{dir="rtl"}

### [פרוטוקול]{dir="rtl"} RIP[:]{dir="rtl"}

> RIP [משתמש באלגוריתם]{dir="rtl"} [של]{dir="rtl"} Bellman-Ford[, שהוא
> אלגוריתם ניתוב וקטור מרחק המעדכן באופן איטרטיבי טבלאות ניתוב על סמך
> מידע שהוחלף עם נתבים שכנים.\
> \
> השימוש ב]{dir="rtl"}RIP [היה פופולארי בעבר, מפני שהוא זקוק רק למידע
> מקומי משכניו הישירים, בעוד ש-]{dir="rtl"}Dijkstra [דורש ידע על
> הטופולוגיה של הרשת כולה.\
> בדרך אגב, הוא גם עוזר לנו עם ניתובים שליליים, אך מקרים כאלה כמעט ולא
> יופיעו ברשת.\
> ניתן לחשוב על מקרה של ניתובים שליליים, כאשר מנהל רשת רוצה לתעדף ניתוב
> על פני אחרים, ובכך מאלץ את הנתבים להעביר את החבילה דרך התקן רשת מסויים
> (למשל דרך חומת אש או מערכת]{dir="rtl"} IPS[).\
>  ]{dir="rtl"}
>
> [עקרונות:]{dir="rtl"}

-   [כאשר נתב מזהה שינוי בעלות המסלול, הוא יכול להשתמש
    ב-]{dir="rtl"}poison reverse [על ידי פרסום המסלול עם מדד אינסופי,
    המיוצג בדרך כלל כ-16, זה למעשה הופך את המסלול ללא רצוי לנתבים אחרים,
    מה שמפחית את הסיכוי לניתוב לולאות.]{dir="rtl"}

-   [חוק]{dir="rtl"} split horizon[, הקובע כי נתב לא צריך לפרסם מסלול
    חזרה לנתב שממנו הוא למד את המסלול הזה. זה מונע הפצת עדכונים
    מיותרת.]{dir="rtl"}

-   [ספירת קפיצות: סופר את מספר הנתבים הנדרשים כדי להגיע לרשת משנה של
    יעד. ספירת הקפיצות המקסימלית ב-]{dir="rtl"}RIP [היא 15, מעבר לזה הוא
    נחשב לבלתי ניתן להשגה.]{dir="rtl"}

-   [טיימר: שליחת עדכונים לנתבים השכנים שלהם כל 30 שניות. מרווח עדכון
    קבוע זה עוזר ליידע נתבים על שינויים בטופולוגיית הרשת, כגון מסלולים
    חדשים או כשלים בנתיבים.]{dir="rtl"}

-   [אם נתב לא מקבל פרסומות מהשכן במשך 180 שניות (פי 3 מרווח העדכון),
    הוא מניח שהקישור לשכן מנותקים, ומעדכן את שכניו.]{dir="rtl"}

> [ ]{dir="rtl"}
>
> [יתרונות:]{dir="rtl"}

-   [פרוטוקול]{dir="rtl"} RIP [מתאים מאוד לרשתות קטנות - קל להבין אותו
    ולהגדיר אותו.]{dir="rtl"}

-   [ניתוב]{dir="rtl"} RIP [מובטח שיתמוך כמעט בכל הנתבים.]{dir="rtl"}

-   RIP [אינו דורש עדכון בכל פעם שטופולוגיית הרשת משתנה.]{dir="rtl"}

> [ ]{dir="rtl"}
>
> [חסרונות:]{dir="rtl"}

-   RIP [יכול ליצור צוואר בקבוק תנועה כאשר הוא משדר את העדכונים שלו כל
    30 שניות. מכיוון שכל עדכון ניתוב ב-]{dir="rtl"}RIP [יתפוס רוחב פס
    גדול, המשאבים לתהליכי]{dir="rtl"} IT [קריטיים מוגבלים.]{dir="rtl"}

-   [ספירת הקפיצות של]{dir="rtl"} RIP [מוגבלת ל-15 הקפות, כך שכל נתב
    מעבר למרחק זה נחשב לאינסוף, ומכאן בלתי ניתן להשגה.]{dir="rtl"}

-   [קצב ההתכנסות איטי. כשקישור כלשהו נופל לוקח הרבה זמן לבחור מסלולים
    חלופיים.]{dir="rtl"}

-   RIP [אינו תומך במספר נתיבים באותו מסלול, מה שעשוי ליצור יותר לולאות
    ניתוב. תוך שימוש במדדי ספירת קפיצות קבועים לבחירת המסלולים הטובים
    ביותר,]{dir="rtl"} RIP [לא מצליח לעבוד כאשר מסלולים מושווים על סמך
    נתונים בזמן אמת. זה גורם לאובדן מנות ועומס יתר על פעולות הרשת עקב
    תהליכים חוזרים.]{dir="rtl"}

> [\
> (\*ברשתות המודרניות נעשה שימוש בפרוטוקולים אחרים כגון]{dir="rtl"} BGP,
> MPLS[,]{dir="rtl"} OSPF [ופחות ב]{dir="rtl"}RIP [בעיקר בגלל החסרון
> ש]{dir="rtl"}RIP [לא מתאים לרשתות גדולות).]{dir="rtl"}
>
> [ ]{dir="rtl"}
>
> [כלי ה]{dir="rtl"} route print[:]{dir="rtl"}
>
> [הכלי הזה מראה את]{dir="rtl"} [טבלאות הניתוב של הראוטר.]{dir="rtl"}
>
> ![](image109.png){width="3.975in"
> height="2.0833333333333335in"}
>
> [ ]{dir="rtl"}
