
---

# תבנית עיצוב: Command (פקודה)

**Command** היא תבנית עיצוב **התנהגותית (Behavioral)**. היא מופיעה עם 3 אזכורים במבחנים, כולל 2 בשאלות פתוחות המחייבות מימוש.

## 🎯 מטרה ובעיה נפתרת

מטרת התבנית היא **לכמוס (Encapsulate) פעולה אחת בצורת אובייקט**. אובייקט הפקודה מכיל את כל המידע הדרוש לביצוע הפעולה: הפונקציה שיש לבצע, האובייקט (`Receiver`) שעליו הפעולה מתבצעת, והארגומנטים.

האריזה הזו מאפשרת לנו להעביר את הפקודה הלאה, לשמור אותה לביצוע עתידי, לתעד אותה, או לאפשר ביטול (Undo) של הפעולה.

**אנלוגיה: שלט רחוק אוניברסלי**

- **Invoker (השלט):** יש לו כפתורים. הוא לא יודע כלום על "טלוויזיה" או "רדיו". הוא רק יודע שלכל כפתור "משויכת פקודה".
    
- **Command (הפקודה):** אובייקט שמכיל את המידע: "קרא למתודה `on()` על אובייקט `tv`".
    
- **Receiver (המכשיר):** האובייקט שבפועל מבצע את העבודה (`TV`, `Radio`).
    

היתרון המרכזי הוא **ניתוק מוחלט** בין מי שמבקש את הפעולה (השלט) לבין מי שמבצע אותה (הטלוויזיה).

## 🏗️ מבנה ומימוש
![](Summeries/עיצוב/media/media/image40.png)
התבנית כוללת ממשק פשוט (`Command`) עם מתודה בודדת (למשל `execute()`).

```Java
// 1. Command Interface
public interface Command {
    public void execute(); // המתודה לביצוע הפעולה
}

// וריאנט גנרי:
public interface Command<T> {
    void execute(T t);
}
```

_בג'אווה מודרנית, ניתן לייתר מחלקות קונקרטיות עבור פקודות פשוטות באמצעות Method Reference או Lambda._

### שילוב עם Composite (פקודות מאקרו)

ניתן לשלב את התבנית עם **[[Composite]]** ליצירת **פקודות מאקרו** (Macro) – פקודה אחת שמפעילה רצף של פקודות אחרות.

```Java
// Macro (Composite Command)
public class Macro {
    private List<Command> commands = new LinkedList();

    public void AddCommand(Command c) { commands.add(c); }

    public void invoke() {
        // הפעלת כל הפקודות ברצף
        for (Command cmd : commands) cmd.execute(); 
    }
}
```

## 💡 הבדל מ-Strategy

זו נקודה חשובה שלעתים קרובות מבלבלת:

- **[[Command]]** עונה על השאלה "**מה** צריך להתבצע?" (אריזת בקשה או פעולה).
    
- **[[Strategy]]** עונה על השאלה "**איך** פעולה נתונה צריכה להתבצע?" (אלגוריתם מורכב ובר-החלפה).
    

## 📚 שאלות ממבחנים

- **תשפ"ד ב א שאלה 3א:** (בית חכם, פעולת מאקרו).
    
- **תשפ"א ב ב שאלה 4א:** (מקלדת חדשנית, הפעלת פונקציות דינמיות).
    
- **תשפ"ד ב ב שאלה 8:** (השוואה ל-Strategy).
    
---
**קודם:** [[Visitor]]
**הבא:** [[Strategy]]

**חזרה ל:** [[תבניות התנהגות]]
**תוכן עניינים ראשי:** [[Summeries/עיצוב/תוכן עניינים]]