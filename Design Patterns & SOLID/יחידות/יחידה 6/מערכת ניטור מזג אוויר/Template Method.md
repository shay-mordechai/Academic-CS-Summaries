
## 1. Template Method (מתודת תבנית)

Template Method היא תבנית עיצוב **התנהגותית**. היא שימשה כתיקון ראשוני לבעיית שכפול הקוד שהתגלתה בחיישנים.
### מטרה ויישום

התבנית מאפשרת להגדיר **שלד (Skeleton) של אלגוריתם** במחלקת האב (`TemperatureSensor`), תוך דחיית שלבים ספציפיים לתתי-המחלקות.

- **מתודת התבנית (`check()`):** זו המתודה המכילה את האלגוריתם הקבוע (קריאת נתון, בדיקת שינוי ועדכון צרכנים). היא נמצאת במחלקת האב המופשטת (`TemperatureSensor`).
- **השלב המופשט (`read()`):** זו המתודה המופשטת שמגדירה **איך בדיוק** לקרוא את הנתון מהחומרה הספציפית. היא ממומשת על ידי מחלקות קונקרטיות כמו `Nimbus_1_TemperatureSensor`.
- **יתרון:** ה-`check()` נכתב פעם אחת בלבד, ובכך נמנע שכפול קוד.

המבנה בUML:
![](Summeries/עיצוב/media/media/image48.png)
### קוד דוגמה (Template Method)
### דוגמת החיישנים מהמצגת (OOPDE-W10Lec19, שקף 36)
במחלקה `TemperatureSensor` האלגוריתם הכללי (התבנית) - מתודת check() 
```
void check() {
    int temp = read();   // קורא למתודה המופשטת (השלב המשתנה)
    if (lastReading != temp){
        lastReading = temp;
        itsMonitoring.displayTemperature(lastReading); // עדכון (ישונה ע"י Observer)
    }
}
// read() מוגדר כ-abstract במחלקת האב
```

_**מתודת `check()` במחלקת `TemperatureSensor` היא ה-Template Method**_.

1. קרא את הערך מהחיישן (read()).
    
2. השווה אותו לקריאה האחרונה.
    
3. אם יש שינוי, עדכן את התצוגה.
    

- השלב הספציפי: המתודה read(). הלוגיקה של קריאת הטמפרטורה שונה בין חיישן אמיתי (Nimbus1_0TemperatureSensor) לבין חיישן בדיקה (TestTemperatureSensor). לכן, מגדירים את read() כמתודה מופשטת, וכל תת-מחלקה מממשת אותה אחרת.
    

היתרון: האלגוריתם הראשי (check) נכתב רק פעם אחת במחלקת האב, ומונע שכפול קוד (OCP).
![](Summeries/עיצוב/media/media/image77.png)(התמונה אוחדה משקפים 36-37 למען הפשטות)
השוואה ל-Strategy:(חשוב למבחן)

- Template Method משתמשת בירושה כדי לקבע את שלד האלגוריתם במחלקת הבסיס.
    
- Strategy משתמשת בהכלה (Composition) כדי להחליף אלגוריתמים נפרדים.
    

 במקרה הבוחן של IRS (מס הכנסה), Strategy עדיפה. (תשפב א ב 3ב)

### שאלות על תבנית Template Method

- מבחן תשפ"ב, סמסטר א', מועד ב', שאלה פתוחה (סעיף ב'):
---
**קודם:** [[תיקון ראשון]]
**הבא:** [[Observer]]

**חזרה ל:** [[מערכת ניטור מזג אוויר (WMS)]]
**תוכן עניינים ראשי:** [[Summeries/עיצוב/תוכן עניינים]]