זו דוגמה קלאסית ומורכבת לשימוש ב**שיטת האלכסון** (Diagonalization) כדי להוכיח שפרדיקט מסוים הוא **איננו חישובי** (לא ניתן להכרעה).

בדוגמה זו, הליכסון נעשה באמצעות **רדוקציה** מבעיית העצירה ($\mathbf{HALT}$) אל הפרדיקט $P$, והיא משתמשת בפונקציה $\mathbf{Lt}$ (אורך הסדרה) כדי להתייחס ל**מבנה הפנימי** של התכנית.

להלן הסבר על הפרדיקט $P$ והאופן שבו משתמשים בו בהוכחת הליכסון:

### 1. ניתוח הפרדיקט $\mathbf{P}(x_1, x_2, x_3, x_4, x_5)$

הפרדיקט $\mathbf{P}$ הוא פרדיקט של חמישה משתנים (מקומי-5), המוגדר באופן הבא:

$$\mathbf{P}(x_1, x_2, x_3, x_4, x_5) = 1$$ **אם ורק אם** התכנית שמספרה $X_1$, בהרצה על הקלט $X_2$, מבצעת **בשלבים עוקבים** שונים ($t_1 < t_2 < t_3$) את השורות $X_3$, לאחר מכן $X_4$, ולבסוף $X_5$.

הפרדיקט הזה בודק **תכונה ספציפית ומסוימת** על **מסלול הריצה** של תכנית (ולא רק על העצירה או הפלט הסופי). ההוכחה נועדה להראות שגם פרדיקט שבודק תכונה פנימית כזו אינו חישובי.

### 2. הבנייה הדיאגונלית (התכנית $\mathbf{Q}$)

ההוכחה מבוצעת על ידי בניית תכנית עזר $\mathbf{Q}$ אשר מכילה את הפרדיקט $P$ בתנאי שלה, כאשר התכנית מיועדת לייצר סתירה או לבצע רדוקציה מבעיה שאינה חישובית.

התכנית $Q$ פועלת על הקלט הדיאגונלי (עצמי) $x$ ומכילה את התנאי: $$\mathbf{P}(x, x, Lt(x+1)-2, Lt(x+1)-1, Lt(x+1))$$

**ניתוח קלטי ה-P בתנאי:**

- **$X_1 = x$ ו-$X_2 = x$:** זהו קידוד ה**תכנית** שמספרה $x$ הרצה על ה**קלט** $x$ (מצב של הפניה עצמית, כמו ב-$\mathbf{HALT}(x, x)$).
- **$Lt(x+1)$:** זוהי פונקציה רקורסיבית פרימיטיבית ($\mathbf{ר"פ}$) אשר מחזירה את **אורך סדרת ההוראות** של התכנית שמספרה $x$ (מכיוון ש-$x$ מקודד את התכנית, $Lt(x+1)$ מייצג את מספר השורות בתכנית).
- **$X_3, X_4, X_5$:** אלה מייצגים את **שלוש השורות האחרונות** בתכנית $x$: השורה השלישית לפני הסוף, השורה השנייה לפני הסוף, והשורה האחרונה.

התכנית $\mathbf{Q}$ (שמספרה נניח $q(x)$) בדרך כלל בנויה כך:

$$\mathbf{Q}(x) = \begin{cases} \text{LOOP} & \text{IF } \mathbf{P}(x, x, Lt(x+1)-2, Lt(x+1)-1, Lt(x+1)) \ \text{HALT} & \text{OTHERWISE} \end{cases}$$

### 3. הוכחת אי-החישוביות באמצעות רדוקציה

השיטה המוצגת במקורות משתמשת ברדוקציה מבעיית העצירה ($\mathbf{HALT}$) כדי להוכיח ש-$P$ אינו חישובי:

1. **הנחה בשלילה:** נניח ש-$\mathbf{P}$ הוא **חישובי**. (כלומר, קיימת תכנית המכריעה אותו).
2. **בניית תכנית עזר ($\mathbf{Q}_n$):** נבנה פונקציה חישובית $q(n)$ הממפה כל מספר תכנית $n$ לתכנית חדשה $Q_n$ (שמספרה $q(n)$).
    - תכנית זו $Q_n$ מתוכננת כך שהיא **מבצעת את שלוש השורות האחרונות שלה** באופן עוקב (כך שהפרדיקט $P$ יהיה $1$) **אם ורק אם** התכנית המקורית $n$ **עוצרת** על הקלט $n$ ($\mathbf{HALT}(n, n)=1$).
    - התכנית $Q_n$ משתמשת בקידודים ובבדיקות על הפלט של $\mathbf{\Phi}(n, n)$.
3. **הרדוקציה:** מתקיים היחס: $$\mathbf{HALT}(n, n) \iff \mathbf{P}(n, q(n), Lt(q(n)+1)-2, Lt(q(n)+1)-1, Lt(q(n)+1))$$ (במקור אחר, הרדוקציה נעשית על קלט קבוע $0$).
4. **מסקנה:** מאחר ש-$\mathbf{HALT}(n, n)$ **אינו חישובי**, ופונקציית הרדוקציה $q(n)$ ופונקציית $Lt$ הן פונקציות $\mathbf{ר"פ}$, הרי שלו $\mathbf{P}$ היה חישובי, היינו מקבלים סתירה לעובדה ש-$\mathbf{HALT}$ אינו ניתן להכרעה.

לכן, המבנה של התכנית ששאלת עליו (השימוש בשלוש השורות האחרונות באמצעות $\mathbf{Lt}$) הוא הדרך שבה מוכיחים שבעיות על **תכונות מסלול הריצה** של תכניות אינן ניתנות לחישוב.

![[Pasted image 20251126113933.png]]
![[Pasted image 20251126113950.png]]