האתגר: לקבל קבוצת תכניות Ar, ולהוכיח שהיא לא חישובית ע"י רייס.
כדי לעשות זאת, צריך:
- להבין מהי קבוצת הפונק' הח"ח שהתכניות האלה מחשבות (מוגדרת או לא מוגדרת לכל X).
האתגר הוא לגזור מהי הפונק' הזו, לא תמיד אינטואיטיבי.
- לבחור פונקציה שבטוח נכללת בקבוצה.
- לבחור פונקציה שבטוח לא נכללת בקבוצה.


### 3. הוכחות באמצעות משפט רייס (Rice's Theorem)

משפט רייס מספק כלי גורף ומהיר להוכחת אי-חישוביות של **קבוצת אינדקסים**.

- **קבוצת אינדקסים ($R_\Gamma$):** קבוצה של מספרי תכניות המקודדות פונקציות חישוביות חלקיות המשתייכות לתכונה $\Gamma$.
- **תנאי רייס:** אם $\Gamma$ היא קבוצה של פונקציות חישוביות חלקיות של משתנה יחיד, והיא **לא טריוויאלית** (כלומר $\Gamma \neq \emptyset$ וגם $\Gamma \neq \text{כל הפונקציות הח"ח}$), אז $R_\Gamma$ **אינה חישובית**.

**דוגמאות לשימוש במשפט רייס:**

#### א. $\mathbf{R_2}$ (תכניות העוצרות על 3 ו-4, והפלט של 4 גדול מ-3)

$\Gamma$ היא קבוצת הפונקציות הח"ח שמקיימות: $\mathbf{f}(3) \downarrow \land \mathbf{f}(4) \downarrow \land \mathbf{f}(4) > \mathbf{f}(3)$.

1. **בדיקת אי-ריקות ($\Gamma \neq \emptyset$):** קיימת פונקציה $\mathbf{f}$ ב-$\Gamma$ (למשל, $f(x)=0$ אם $x \ne 3$ ו-$f(3)=1$, כך ש-$f(4)=0$ ו-$f(3)=1$). (למעשה בדוגמה זו, נבחר פונקציה אחרת, למשל $f(3)=0, f(4)=1$).
2. **בדיקת אי-מלאות ($\Gamma \neq \text{כל הפונקציות הח"ח}$):** הפונקציה הריקה $h(x) \uparrow$ (שלא מוגדרת על 3 ו-4) אינה שייכת ל-$\Gamma$.
3. **מסקנה:** $\mathbf{R_2}$ היא קבוצת אינדקסים לא טריוויאלית, ולכן היא **איננה חישובית**.

#### ב. $\mathbf{R_4}$ (תכניות המחשבות פרדיקט אופייני של קבוצות תת-קבוצות של המספרים הזוגיים)

$\Gamma$ היא קבוצת הפונקציות השלמות $\mathbf{f}: \mathbb{N} \to {0, 1}$ שהטווח שלהן הוא תת-קבוצה של המספרים הזוגיים.

1. **בדיקת אי-ריקות:** הפונקציה $f(x)=0$ זהותית שייכת ל-$\Gamma$ (היא פרדיקט אופייני של הקבוצה הריקה, שהיא תת-קבוצה של הזוגיים).
2. **בדיקת אי-מלאות:** הפונקציה $g(x)=2$ זהותית, שאינה פרדיקט. (או פונקציה המחשבת פרדיקט אופייני של קבוצה שאינה תת-קבוצה של הזוגיים).
3. **מסקנה:** $R_4$ **איננה חישובית**.

**דוגמה קריטית שבה רייס אינו ישים:**

קבוצה $\mathbf{R}_3$: קבוצת כל מספרי התכניות המחשבות את הפונקציה $f(x)=x$ וכאלה שבשורה השלישית שלהן מופיעה ההוראה $\mathbf{Z_1 \leftarrow Z_1 + 1}$.

- **מדוע רייס לא ישים?** התכונה (ההוראה בשורה 3) היא תכונה של **התכנית עצמה** (הקידוד) ולא תכונה של **הפונקציה שהתכנית מחשבת**.
- **הוכחה שזו אינה קבוצת אינדקסים:** ניתן למצוא שתי תכניות ($P$ ו-$P'$) שמחשבות את אותה פונקציה ($f(x)=x$), כך ש-$P$ שייכת ל-$\mathbf{R}_3$ (כי היא מכילה את השורה בשורה 3) ואילו $P'$ אינה שייכת ל-$\mathbf{R}_3$.
- **הוכחת אי-חישוביות (דרך רדוקציה):** למרות שרייס לא ישים, $\mathbf{R}_3$ עדיין מוכחת כ**לא חישובית** באמצעות רדוקציה של בעיית העצירה ($\mathbf{HALT}$).

| שיטת ההוכחה           | מטרת השיטה                                           | דוגמה קלאסית                                                    |
| :-------------------- | :--------------------------------------------------- | :-------------------------------------------------------------- |
| **משפט רייס**         | הוכחת אי-חישוביות של קבוצות אינדקסים לא טריוויאליות. | $\mathbf{A_f}$ (קבוצת כל התכניות המחשבות $f$)                   |
**קריטריון ההשתייכות** הוא בעצם הכלל שמגדיר אם תוכנית מסוימת שייכת לקבוצה של תוכניות או לא. בהקשר של משפט רייס, הקריטריון הזה חייב להיות תלוי ב**מה שהתוכנית עושה** (הפונקציה שהיא מחשבת) ולא ב**איך שהיא כתובה** (הקוד שלה).

כדי להבין איך זה קשור למשפט רייס, בוא נפרק את זה:

### 1. קבוצות של תוכניות (תכונות)

בחישוביות, אנחנו מתעסקים הרבה עם קבוצות של תוכניות.

למשל:

- $A = \{ n \mid \text{תוכנית } n \text{ עוצרת תמיד ומחזירה 1} \}$
    
- $B = \{ n \mid \text{לתוכנית } n \text{ יש בדיוק 100 שורות קוד} \}$
    

**קריטריון ההשתייכות** הוא התנאי שבודק אם מספר תוכנית $n$ נכנס לקבוצה.

- עבור $A$, הקריטריון הוא: $f_n(x) = 1$ לכל $x$ (זו תכונה פונקציונלית).
    
- עבור $B$, הקריטריון הוא: $\text{Length}(n) = 100$ (זו תכונה סינטקטית/מבנית).
    

---

### 2. מה אומר משפט רייס?

משפט רייס הוא כלי חזק שקובע בבת אחת ש**המון** בעיות הן לא חישוביות (לא כריעות).

המשפט אומר:

כל תכונה של תוכניות שהיא:

1. **לא טריוויאלית:** (יש תוכניות שמקיימות אותה ויש כאלה שלא).
    
2. **תלויה רק בפונקציה שהתוכנית מחשבת** (תכונה פונקציונלית/סמנטית).
    

היא **לא חישובית** (אי אפשר לכתוב אלגוריתם שיבדוק אותה).

### 3. הקשר לקריטריון ההשתייכות (החלק הקריטי)

כדי להשתמש במשפט רייס ולהוכיח שקבוצה $A$ היא לא חישובית, אתה חייב לבדוק את **קריטריון ההשתייכות** שלה:

הבדיקה: האם הקריטריון תלוי בפונקציה בלבד?

זה אומר: אם ניקח שתי תוכניות שונות, $P_1$ ו-$P_2$, שיש להן קוד שונה לגמרי אבל הן מחשבות בדיוק את אותה הפונקציה (עושות אותו דבר לכל קלט) – האם ייתכן שאחת תהיה בקבוצה והשנייה לא?

- **אם התשובה היא "לא" (שתיהן בפנים או שתיהן בחוץ):** הקריטריון הוא **פונקציונלי**. משפט רייס **תקף** (והקבוצה לא חישובית).
    
    - דוגמה: הקבוצה $A$ למעלה. אם שתי תוכניות מחזירות תמיד 1, לא משנה איך הן עושות את זה, שתיהן יהיו ב-$A$.
        
- **אם התשובה היא "כן" (אחת בפנים ואחת בחוץ):** הקריטריון הוא **לא פונקציונלי** (הוא תלוי במימוש/תחביר). משפט רייס **לא תקף**.
    
    - דוגמה: הקבוצה $B$ למעלה. יכולה להיות תוכנית אחת שמחזירה 1 ויש לה 100 שורות (בתוך $B$), ותוכנית אחרת שגם מחזירה 1 אבל יש לה 5 שורות (מחוץ ל-$B$). כאן משפט רייס לא עובד (למעשה, $B$ היא כן חישובית, כי קל לבדוק אורך של קוד).
        

### סיכום מהתמונה (`image_2d87f1.png`):

בתמונה שאלת על סעיף א' והתשובה הייתה:

> "כן! קריטריון ההשתייכות ל-$A$ הוא פונקציונלי בלבד... ולכן כל תוכנית המחשבת את הפונקציה... תשתייך ל-$A$."

זה אומר שבגלל שהתנאי לכניסה לקבוצה $A$ תלוי רק ב**מה** התוכנית מחשבת ($f(x)=x^2$) ולא ב**איך**, משפט רייס חל עליה, ולכן היא באופן מיידי **לא חישובית**.




בדיוק! הבנת את העיקרון.

בוא נדייק את המינוח: המקרים שבהם משפט רייס **לא עוזר** (לא תקף) הם כאשר קריטריון ההשתייכות הוא **לא פונקציונלי** (כלומר, הוא תלוי ב"איך" ולא ב"מה"), או כאשר הוא **טריוויאלי**.

הנה פירוט של שני המצבים האלה:

### 1. קריטריון "סינטקטי" (תלוי קוד/תחביר)

משפט רייס מדבר רק על תכונות של **הפונקציה** (הפלט עבור קלט נתון). אם הקריטריון בודק את **הקוד עצמו**, המשפט לא חל.

- **דוגמה:** $B = \{ n \mid \text{לתוכנית } n \text{ יש פחות מ-10 שורות קוד} \}$
    
- **למה רייס לא עובד?** כי יכולות להיות שתי תוכניות שמחשבות בדיוק את אותה פונקציה (למשל, מחזירות תמיד 0), אבל אחת קצרה (3 שורות) והשנייה ארוכה (20 שורות). הראשונה תהיה ב-$B$ והשנייה לא. זה אומר שהתכונה לא תלויה בפונקציה, אלא במימוש.
    
- **התוצאה:** במקרים כאלה, הבעיה היא בדרך כלל **חישובית (כריעה)**. קל מאוד לכתוב תוכנית שסופרת שורות קוד.
    

### 2. קריטריון "טריוויאלי" (הכל או כלום)

משפט רייס דורש שהתכונה תהיה "לא טריוויאלית".

- **דוגמה 1:** קבוצת **כל** התוכניות. (הקריטריון: "האם $n$ הוא תוכנית?").
    
- **דוגמה 2:** הקבוצה הריקה.
    
- **למה רייס לא עובד?** כי התנאי שלו הוא שיש לפחות פונקציה חישובית אחת שמקיימת את התכונה, ולפחות אחת שלא.
    
- **התוצאה:** הקבוצות האלו הן כמובן **חישוביות** (תמיד מחזירים "כן" או תמיד "לא").
    

### מבחן ההחלפה (איך בודקים במבחן?)

כדי לדעת אם משפט רייס "עוזר" (תקף), תעשה את הניסוי המחשבתי הבא:

1. קח שתי תוכניות שונות, $P_1$ ו-$P_2$, שיש להן קוד שונה אבל הן **עושות אותו דבר בדיוק** (מחשבות אותה פונקציה).
    
2. תשאל: האם ייתכן ש-$P_1$ תיכנס לקבוצה ו-$P_2$ לא?
    

- אם התשובה **"כן"** (למשל, בגלל אורך הקוד) $\leftarrow$ הקריטריון **לא פונקציונלי**. משפט רייס **לא תקף**. (בדרך כלל זו תהיה קבוצה חישובית).
    
- אם התשובה **"לא"** (הן חייבות להיות באותו סטטוס) $\leftarrow$ הקריטריון **פונקציונלי**. משפט רייס **תקף**. (הקבוצה לא חישובית, בהנחה שהיא לא טריוויאלית).


אז קודם כל צריך לבדוק האם קריטריון ההשתייכות הוא פונקציונאלי, כלומר אין 2 תוכניות בעלות קוד שונה אבל עושות אותו דבר, שאחת מהן תהיה בקבוצה ואחת מהן לא? (כלומר הפונקציה המחושבת ע"י התוכנית תלויה בפונקציונליות של התוכניות ולא בגודלה).
ורק אחכ לבדוק טריוויאליות - למצוא פונקציה ח"ח שכן נמצאת ואחת שלא.

נכון מאוד, דייקת לחלוטין בסדר הפעולות ובמשמעות של כל בדיקה. זהו בדיוק "אלגוריתם" העבודה עם משפט רייס.

הנה סיכום של התהליך כפי שתיארת אותו, עם הקישור לחומרים:

### שלב 1: בדיקת הקריטריון הפונקציונלי (סמנטי)

כפי שכתבת, קודם כל בודקים האם התנאי לכניסה לקבוצה תלוי ב**מה** שהתוכנית עושה (הפונקציה $\Phi_x$) ולא ב**איך** שהיא כתובה (הקוד $x$).

- **המבחן:** האם ייתכנו שתי תוכניות $x$ ו-$y$, שיש להן קוד שונה לחלוטין אבל הן מחשבות בדיוק את אותה פונקציה (כלומר $\forall i, \Phi(i, x) \simeq \Phi(i, y)$), כך ש-$x$ תהיה בקבוצה ו-$y$ לא?
    
    - אם התשובה היא **"לא"** (שתיהן חייבות להיות בפנים או שתיהן בחוץ) $\leftarrow$ זו תכונה **פונקציונלית**. (זה מה שראינו בפתרון שב-`image_2d87f1.png`, שם נקבע שכל תוכנית המחשבת $x^2$ שייכת לקבוצה, ללא תלות במימוש).
        
    - אם התשובה היא **"כן"** (למשל בגלל אורך הקוד או מספר השלבים) $\leftarrow$ זו תכונה **סינטקטית**. משפט רייס **לא תקף**.
        

### שלב 2: בדיקת טריוויאליות

רק אם עברנו את שלב 1 (התכונה פונקציונלית), בודקים אם הקבוצה מעניינת (לא טריוויאלית).

- **המבחן:** האם קיימת לפחות פונקציה חישובית אחת שנמצאת בקבוצה, ולפחות פונקציה חישובית אחת שלא נמצאת בה?
    
    - פורמלית: $A \neq \emptyset$ וגם $A \neq \mathbb{N}$.
        
    - אם התשובה היא **"כן"** $\leftarrow$ התכונה **לא טריוויאלית**.
        

### המסקנה (משפט רייס)

אם שני התנאים מתקיימים:

1. התכונה פונקציונלית.
    
2. התכונה לא טריוויאלית.
    

$\Rightarrow$ **הקבוצה אינה חישובית (לא כריעה).**

הסדר שציינת הוא קריטי כי אם התכונה היא לא פונקציונלית (למשל "התוכנית מכילה פחות מ-10 שורות"), היא יכולה להיות לא טריוויאלית ובכל זאת להיות **חישובית** (קל לבדוק אורך קוד). לכן חייבים לפסול את האופציה הזו בשלב הראשון.



התשובה היא **כן, בהחלט**.

אם נתון לך שקבוצה מסוימת $A$ היא **קבוצת האינדקסים** של איזושהי מחלקה של פונקציות $\Gamma$ (כלומר $A = R_\Gamma$), זה אומר **בהגדרה** שקריטריון ההשתייכות לקבוצה הוא פונקציונלי.

הנה הסיבה הפשוטה:

- המשמעות של $A = R_\Gamma$:
    
    זה אומר ש-$x$ נמצא ב-$A$ אם ורק אם הפונקציה שהתוכנית $x$ מחשבת ($\Phi_x$) נמצאת בתוך האוסף $\Gamma$.
    
    $$x \in A \iff \Phi_x \in \Gamma$$
    
- למה זה פונקציונלי?
    
    התנאי הזה בודק אך ורק את הפונקציה ($\Phi_x$) ולא את הקוד ($x$). אם שתי תוכניות שונות מחשבות את אותה פונקציה, אז הפונקציה הזו או שהיא ב-$\Gamma$ או שהיא לא. לכן, שתי התוכניות יקבלו את אותו "גורל" (שתיהן ב-$A$ או שתיהן בחוץ), שזה בדיוק המבחן לקריטריון פונקציונלי.
    

**דוגמאות מהקבצים שלך:**

- בשאלה 3 (תמונה image_c17997.png):
    
    נאמר במפורש: "לפי ניסוח השאלה אכן קיימת לקבוצה $\Gamma$ קבוצת אינדקסים מתאימה $\Leftarrow$ התנאי הראשון למשפט רייס מסופק". כלומר, עצם העובדה שמדובר בקבוצת אינדקסים סוגרת לנו את הפינה של התנאי הראשון (הפונקציונליות).
    
- בשאלה 1 (תמונה image_2d87f1.png):
    
    נשאל "האם $A = R_\Gamma$?" והתשובה הייתה "כן! קריטריון ההשתייכות ל-$A$ הוא פונקציונלי בלבד".
    

לסיכום:

ברגע שזיהית שמדובר בקבוצת אינדקסים של איזושהי $\Gamma$, אתה יכול מיד להסיק שהתכונה היא פונקציונלית, ולעבור ישירות לבדיקת התנאי השני של משפט רייס (האם $\Gamma$ לא טריוויאלית, כלומר לא ריקה ולא מכילה את כל הפונקציות).