תבנית ה**מכפלה החסומה** היא תבנית יסודית במחלקת הפונקציות ה**רקורסיביות הפרימיטיביות (ר"פ)**, והיא מקבילה מבנית להגדרת ה**סכימה החסומה** שכבר עסקנו בה.

מכפלה חסומה, המוגדרת על ידי $h(y, x_1, \dots, x_n) = \prod_{t=0}^{y} f(t, x_1, \dots, x_n)$, מוכיחה את היותה **ר"פ** על ידי הצגתה באמצעות **רקורסיה פרימיטיבית** (PRR).

**הוכחת הר"פ-יות באמצעות רקורסיה פרימיטיבית:**

המשפט קובע שאם הפונקציה $f(t, \bar{x})$ היא ר"פ, אז גם פונקציית המכפלה החסומה $h$ היא ר"פ. ההוכחה נשענת על כך שפעולת **הכפל** ($\cdot$) היא **פונקציה ר"פ** בפני עצמה.

1. **בסיס הרקורסיה ($t=0$):** במצב הבסיס, המכפלה מתחילה עם האיבר הראשון: $$h(0, \bar{x}) = f(0, \bar{x})$$ מאחר ש-$f$ היא ר"פ, הרי ש-$h(0, \bar{x})$ היא ר"פ (כהרכבה של $f$ עם פונקציות קבועות והיטל).
    
2. **צעד הרקורסיה ($t+1$):** המעבר לצעד הבא מוגדר על ידי הכפלת הערך הקודם של המכפלה ($h(t, \bar{x})$) בפונקציה $f$ המחושבת עבור הערך החדש ($t+1$): $$h(y+1, \bar{x}) = h(y, \bar{x}) \cdot f(y+1, \bar{x})$$ פונקציה זו מוגדרת כהרכבה של **פונקציית הכפל** (ר"פ) על $h(y, \bar{x})$ ועל $f(y+1, \bar{x})$ (שהן ר"פ), ולכן $h$ היא **ר"פ**.
    

**דוגמה קלאסית:**

הוכחת הר"פ-יות של **פונקציית העצרת** ($f(x)=x!$) היא דוגמה מרכזית המשתמשת בתבנית המכפלה החסומה. היא מוגדרת באופן רקורסיבי על ידי: $$f(0) = 1$$ $$f(x+1) = f(x) \cdot (x+1)$$

---

דוגמאות:
דוגמאות אלה ממחישות את השימוש המדויק בטכניקת **מציאת המעבר** (הפרש או יחס מכפלי) כדי להתאים פונקציה המוגדרת באופן איטרטיבי, לפורמט הפורמלי של **רקורסיה פרימיטיבית (PRR)**.

אני אסביר לאט לאט כל אחת מהדוגמאות, ואפרט את הדרך להוכיח שהן **רקורסיביות פרימיטיביות (ר"פ)**.

## 1. סכימה חסומה: פונקציית סכום הריבועים

**השאלה:** הוכח כי הפונקציה $f(n) = \frac{n(n+1)(2n+1)}{6}$ (המייצגת את סכום הריבועים $f(n) = \sum_{t=1}^{n} t^2$) היא ר"פ.

### א. זיהוי התבנית וטכניקת הפתרון

- **תבנית:** הפונקציה שייכת לתבנית **סכימה חסומה** $(\sum_{t=1}^{n} t^2)$, שהיא סוג של **אופרטור חסום**.
- **טכניקה:** עבור סכימה חסומה, טכניקת הפתרון היא **מציאת ההפרש החיבורי** ($f(n+1) - f(n)$), על מנת להגדיר את **פונקציית המעבר ($g$)** של הרקורסיה הפרימיטיבית.

### ב. יישום ההוכחה (PRR)

עלינו להגדיר את $f(n)$ באמצעות שני כללים: בסיס הרקורסיה וצעד הרקורסיה.

#### שלב 1: מציאת בסיס הרקורסיה

הבסיס הוא $f(0)$: $$f(0) = \frac{0(0+1)(2\cdot 0+1)}{6} = 0$$ $f(0)=0$ היא **פונקציה ר"פ** (פונקציית האפס).

#### שלב 2: מציאת צעד הרקורסיה (מציאת ההפרש)

נחשב את ההפרש $f(n+1) - f(n)$. מאחר ש-$f(n)$ היא הסכום עד $n$, $f(n+1)$ הוא הסכום עד $n+1$. ההפרש הוא האיבר האחרון שנוסף: $$f(n+1) - f(n) = (n+1)^2$$ מכאן נגדיר את יחס הרקורסיה: $$f(n+1) = f(n) + (n+1)^2$$ נגדיר את **פונקציית המעבר** $g(n, y)$ (כאשר $y=f(n)$) על ידי: $$g(n, y) = y + (n+1)^2$$

#### שלב 3: הסקת המסקנות

- פונקציית המעבר $g(n, y)$ היא **ר"פ** כהרכבה של פונקציות ר"פ: פונקציית העוקב ($n+1$) ופעולות החיבור והכפל (ריבוע).
- מכיוון ש-$f$ מוגדרת על ידי רקורסיה פרימיטיבית של פונקציות ר"פ, הרי ש-$f$ היא **ר"פ**.

---

## 2. מכפלה חסומה: פונקציית העצרת

**השאלה:** הוכח כי פונקציית העצרת $f(x)=x!$ היא ר"פ.

### א. זיהוי התבנית וטכניקת הפתרון

- **תבנית:** הפונקציה שייכת לתבנית **מכפלה חסומה** ($\prod_{t=1}^{x} t$), שהיא סוג של **אופרטור חסום**.
- **טכניקה:** עבור מכפלה חסומה, טכניקת הפתרון היא **מציאת היחס המכפלי** ($f(x+1) / f(x)$), על מנת להגדיר את פונקציית המעבר.

### ב. יישום ההוכחה (PRR)

עלינו להגדיר את $f(x)$ באמצעות PRR.

#### שלב 1: מציאת בסיס הרקורסיה

הבסיס הוא $f(0)$: $$f(0) = 0! = 1$$ $f(0)=1$ היא **פונקציה ר"פ** (פונקציה קבועה).

#### שלב 2: מציאת צעד הרקורסיה (מציאת היחס)

נחשב את יחס המעבר בין $f(x+1)$ ל-$f(x)$: $$f(x+1) = (x+1)! = x! \cdot (x+1) = f(x) \cdot (x+1)$$ נגדיר את **פונקציית המעבר** $g(x, y)$ (כאשר $y=f(x)$) על ידי: $$g(x, y) = y \cdot (x+1)$$

#### שלב 3: הסקת המסקנות

- פונקציית המעבר $g(x, y)$ היא **ר"פ** כהרכבה של פונקציות ר"פ: הכפל ($y \cdot (x+1)$) והעוקב ($x+1$).
- מכיוון ש-$f$ מוגדרת על ידי רקורסיה פרימיטיבית של פונקציות ר"פ, הוכח כי $f$ היא **ר"פ**.

---

## 3. שאלת הוכחה פורמלית: כלל המכפלה החסומה

**השאלה:** הוכח שאם $f(t, \bar{x})$ היא ר"פ, אז גם $h(y, \bar{x}) = \prod_{t=0}^{y} f(t, \bar{x})$ היא ר"פ.

### א. זיהוי התבנית וטכניקת הפתרון

- **תבנית:** זוהי הוכחה פורמלית ל**כלל** ה**מכפלה החסומה**.
- **טכניקה:** יש להגדיר את פונקציית המכפלה $h$ באמצעות PRR, תוך שימוש בפונקציות הבסיסיות (כפל ופונקציות היטל).

### ב. יישום ההוכחה (PRR)

נציג את $h(y, \bar{x})$ באמצעות PRR, שבה הרקורסיה מתבצעת על המשתנה $y$:

#### שלב 1: בסיס הרקורסיה ($y=0$)

$$h(0, \bar{x}) = f(0, \bar{x})$$ מכיוון ש-$f$ היא ר"פ, ו-0 הוא קבוע ר"פ, $h(0, \bar{x})$ היא **ר"פ** כהרכבה של $f$ ופונקציות בסיסיות (כגון פונקציות היטל $u_{i}^{n}$ ופונקציית האפס $n(x)=0$ או קבועים).

#### שלב 2: צעד הרקורסיה ($y+1$)

נגדיר את $h(y+1, \bar{x})$ באמצעות ערכה הקודם $h(y, \bar{x})$: $$h(y+1, \bar{x}) = h(y, \bar{x}) \cdot f(y+1, \bar{x})$$

#### שלב 3: הגדרת פונקציית המעבר ($g$) והסקת המסקנות

נגדיר את פונקציית המעבר $g(y, z, \bar{x})$ (כאשר $z = h(y, \bar{x})$): $$g(y, z, \bar{x}) = z \cdot f(y+1, \bar{x})$$ הפונקציה $g$ היא **ר"פ** כהרכבה של פונקציות ר"פ: הכפל, פונקציית העוקב, ופונקציית ההיטל המייצגת את $z$ ואת $\bar{x}$, והפונקציה $f$ המקורית.

מכיוון ש-$h$ מוגדרת על ידי רקורסיה פרימיטיבית של פונקציות ר"פ, הוכח כי כלל **המכפלה החסומה** נשמר במחלקת הר"פ.

---
