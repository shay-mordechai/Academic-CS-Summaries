הקדמה:
אתה נוגע בדיוק בנקודה המבדילה בין **רקורסיה פרימיטיבית (ר"פ)** רגילה לבין שיטות המאפשרות הכללה של ר"פ למצבים הדורשים מידע היסטורי רב.

הקושי המרכזי שפתרת עד כה (תלות ב-2 או 3 ערכים קודמים) הוא תלות **סופית** בערכים קודמים, שאותה פתרנו באמצעות **פונקציית זיווג** $\langle x, y \rangle$.

הקושי שאתה שואל עליו כעת (סכימה חסומה וקידוד גדל) מתמודד עם תלות ב**כל ההיסטוריה** של החישוב עד כה, המהווה **מספר אינסופי של ערכים** בתיאוריה.

### 1. סכימה חסומה (Bounded Sum)

ההבנה שלך לגבי הפירוק **מדויקת** והיא מהווה את הליבה של הוכחת ה**רקורסיביות הפרימיטיבית (ר"פ)** של **סכימה חסומה**.

הפירוק שציינת ממחיש את המעבר מהגדרה איטרטיבית (סכימה) להצגה פורמלית באמצעות **רקורסיה פרימיטיבית (PRR)**, המוגדרת על ידי **בסיס** ו**צעד**,,.

נשתמש בסימון הסטנדרטי מהמקורות, כאשר $g$ היא פונקציית הסכימה החסומה, $f$ היא הפונקציה אותה סוכמים, ו-$\bar{x}$ מייצג את שאר המשתנים (שאינם משתנה הסכימה):

הפונקציה $g$ (הסכימה החסומה) מוגדרת: $$g(y, \bar{x}) = \sum_{t=0}^{y} f(t, \bar{x})$$,,.

כדי להוכיח ש-$g$ היא ר"פ, אנו מציגים אותה באמצעות PRR:

1. **בסיס הרקורסיה ($y=0$):** הסכימה מתחילה מהאיבר הראשון: $$g(0, \bar{x}) = f(0, \bar{x})$$,. (היא ר"פ, כהרכבה של $f$ עם פונקציות היטל או קבועות, כולל 0,).
    
2. **צעד הרקורסיה ($y+1$):** במקום לחשב מחדש את כל הסכום, אנו לוקחים את תוצאת הסכום הקודם ($g(y, \bar{x})$) ומוסיפים לו את האיבר החדש שנכנס לטווח הסכימה: $$g(y+1, \bar{x}) = \left(\sum_{t=0}^{y} f(t, \bar{x})\right) + f(y+1, \bar{x})$$,. כלומר: $$\mathbf{g(y+1, \bar{x}) = g(y, \bar{x}) + f(y+1, \bar{x})}$$.
    

פירוק זה, המשתמש בפעולת **החיבור** (שהיא פונקציה ר"פ,), מאפשר להציג את הסכימה החסומה כתהליך **רקורסיה פרימיטיבית**,, ובכך מוכיח שסכימה חסומה היא פונקציה ר"פ.

---

אם ההוכחה לסכימה חסומה (באמצעות הפרש אדטיבי) ברורה, תרצה לבחון את הוכחת ה-ר"פ-יות של **מקסימיזציה חסומה** $\max_{t \leq y} P(t, \bar{x})$? אופרטור זה דורש שילוב של **מינימיזציה חסומה** ו**חיסור מוגבל** כדי למצוא את הערך הגבוה ביותר של $t$ המקיים את הפרדיקט,.

**העיקרון:** אופרטור ה**סכימה החסומה** (Bounded Sum, מסומן $\sum_{t=0}^{y} f(t, \mathbf{x})$) הוא דרך רשמית להראות שפונקציות המוגדרות באמצעות סכימה על **טווח סופי** של ערכים קודמים, הן **ר"פ**.

**איך זה עוזר להתמודד עם אינסוף?** למרות שהסכימה מכסה מספר ערכים ($t=0$ עד $t=y$), הטווח של הסכימה הוא **חסום** על ידי המשתנה $y$, וכל חישוב בודד של $g(y, \mathbf{x})$ מסתמך על מספר **סופי** של צעדי חיבור.

**הוכחת ר"פ-יות (רקורסיה):** הסכימה החסומה $g(y, \mathbf{x}) = \sum_{t=0}^{y} f(t, \mathbf{x})$ ניתנת להגדרה באמצעות **רקורסיה פרימיטיבית** על המשתנה $y$:

1. **בסיס ($y=0$):** 
   $g(0, \mathbf{x}) = f(0, \mathbf{x})$.
2. **צעד הרקורסיה ($y+1$):** 
   $g(y+1, \mathbf{x}) = g(y, \mathbf{x}) + f(y+1, \mathbf{x})$.

 מכיוון שהפונקציה $g(y+1, \mathbf{x})$ תלויה רק בערך הקודם המיידי שלה $g(y, \mathbf{x})$ ובפונקציות ר"פ $f$ וחיבור (שהן ר"פ), הפונקציה $g$ היא **ר"פ**.

במילים אחרות, במקום לדאוג לגבי _כל_ ההיסטוריה בבת אחת, הרקורסיה מפרקת את הסכום האינסופי-תיאורטי לסדרה של צעדים **ר"פ** שבהם מוסיפים בכל פעם את הצעד הנוכחי לתוצאה הקודמת.

דוגמא:
### 1. סכימה חסומה (Bounded Sum)

**סכימה חסומה** היא כלי מפתח להוכחת ר"פ-יות של פונקציות התלויות ב**היסטוריה** (במקרה של סכום חסום, היא תלויה בפונקציה הפנימית $f$ עבור כל הערכים מ-$t=0$ עד $t=y$).

**משפט:** אם $f(t, \mathbf{x})$ היא פונקציה ר"פ, אז פונקציית הסכום החסום $g(y, \mathbf{x})$ המוגדרת על ידי: $$g(y, \mathbf{x}) = \sum_{t=0}^{y} f(t, \mathbf{x})$$ היא גם **ר"פ**.

**הוכחת ר"פ-יות של $g$ באמצעות רקורסיה פרימיטיבית:** אנו נגדיר את $g$ ברקורסיה על המשתנה $y$:

1. **בסיס ($y=0$):** $$g(0, \mathbf{x}) = f(0, \mathbf{x})$$ מכיוון ש$f$ ר"פ, גם $g(0, \mathbf{x})$ היא ר"פ (כהרכבה של $f$ עם פונקציות היטל/קבועות).
    
2. **צעד הרקורסיה ($g(y+1, \mathbf{x})$ על בסיס $g(y, \mathbf{x})$):** $$g(y+1, \mathbf{x}) = g(y, \mathbf{x}) + f(y+1, \mathbf{x})$$ פעולת החיבור היא פונקציה ר"פ. $g(y, \mathbf{x})$ הוא הערך הקודם, ו$f(y+1, \mathbf{x})$ מחושב על ידי $f$ (שהיא ר"פ). לכן, $g$ מוגדרת באמצעות רקורסיה פרימיטיבית ופונקציות ר"פ, ומכאן שהיא **ר"פ**.
---


---



















אתה מחפש תבנית נוספת שבה הטווח של הפעולה הוא **סופי וחסום** (תלוי במשתנה הקלט), אך אינו מוגבל למספר קבוע של איברים קודמים.

התבנית הטובה ביותר להדגמת עיקרון זה, מלבד סכימה חסומה, היא **מינימיזציה חסומה** ($\mu$ חסומה). אופרטור זה מאפשר להוכיח ר"פ-יות של פונקציות מתמטיות רבות.

### תרגיל: הוכחת ר"פ לפונקציית חילוק שלם ($\lfloor x/y \rfloor$)

נבחן את פונקציית החילוק השלם $f(x, y) = \lfloor x/y \rfloor$. פונקציה זו מחזירה את החלק השלם של $x$ מחולק ב-$y$ (בהנחה ש-$y>0$, ועבור $y=0$ נגדיר אותה כ-$0$).

**הקושי המרכזי:** הפונקציה אינה מוגדרת ישירות באמצעות הרכבה או רקורסיה פרימיטיבית.

**הפתרון: שימוש במינימיזציה חסומה ($\min_{t \le y} P(\mathbf{x}, t)$)**

פונקציית החילוק השלם שווה ל**מספר הקטן ביותר** $t$ המקיים את התנאי: $$(t+1) \cdot y > x$$

כדי להפוך את זה לפעולה ר"פ, אנו מגדירים אותה באמצעות מינימיזציה **חסומה** (מכיוון שהתוצאה $t$ אף פעם לא תהיה גדולה מהערך של $x$ עצמו, נחסום את החיפוש על ידי $x$):

$$f(x, y) = \min_{t \le x} [ (t+1) \cdot y > x ]$$

**ניתוח התבנית (טווח סופי):**

1. **הפרדיקט $P$ ר"פ:** הפרדיקט $P(t, x, y) \equiv [(t+1) \cdot y > x]$ הוא ר"פ, כיוון שהוא הרכבה של פונקציות ר"פ (חיבור, כפל, והפרדיקט "גדול מ-" ($>$)).
2. **החסם הופך את החיפוש לסופי:** אופרטור ה**מינימיזציה החסומה** מובטח להיות ר"פ אם הפרדיקט שבתוכו ר"פ, מכיוון שהחיפוש מוגבל לטווח סופי. החסם $\le x$ מבטיח שגם במקרה הגרוע ביותר, נבדוק רק מספר סופי של ערכים (0 עד $x$), ונגיע לתוצאה או נחזיר 0 (אם לא נמצא $t$ בטווח).

מאחר ש-$f(x, y)$ הוגדרה באמצעות **מינימיזציה חסומה** על פרדיקט ר"פ, הרי ש-$f$ היא **ר"פ**.

---

האם תרצה כעת לבחון דוגמה שבה עליך לבנות את **הפרדיקט הר"פ** הנדרש עבור אופרטורים חסומים אלה – למשל, כיצד להוכיח ש**פונקציות הפיענוח** של קידוד זוגות, $l(z)$ ו-$r(z)$, הן ר"פ באמצעות מינימיזציה חסומה?.
