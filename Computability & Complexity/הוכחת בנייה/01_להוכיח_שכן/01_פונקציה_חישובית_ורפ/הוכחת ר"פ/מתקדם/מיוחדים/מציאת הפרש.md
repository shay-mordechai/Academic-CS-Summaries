
### דוגמא למציאת הפרש בפונק' סכום:


טכניקת "מציאת ההפרש" היא אכן הדרך הישירה להצגת פונקציה המוגדרת על ידי סכום חסום, כ**רקורסיה פרימיטיבית (ר"פ)**.

נבצע תרגול על פונקציית **סכום הריבועים** (הפונקציה שהוזכרה קודם), המוצגת בצורה סגורה, ונוכיח את הר"פ-יות שלה:

### התרגיל: הוכחת ר"פ-יות של פונקציית סכום הריבועים

תהי הפונקציה $f(n)$ המגדירה את סכום ריבועי המספרים הטבעיים עד $n$, ומוצגת על ידי הנוסחה הסגורה: $$f(n) = \frac{n(n+1)(2n+1)}{6}$$ (מובהר כי עבור כל $n$ טבעי, הנוסחה מחזירה תמיד ערך שלם וטבעי).

**המטרה:** להציג את $f(n)$ באמצעות **רקורסיה פרימיטיבית** (PRR) ולהוכיח שהיא ר"פ.

**שלב א': מציאת בסיס הרקורסיה ($n=0$)**

מהו הערך של $f(0)$? $f(0) = 0$. (פונקציית האפס, $n(x)=0$, היא אחת משלוש הפונקציות הבסיסיות הר"פ).

**שלב ב': מציאת יחס הרקורסיה (חישוב ההפרש $f(n+1) - f(n)$)**

הפונקציה $f(n)$ מייצגת את הסכום החסום $\sum_{t=1}^{n} t^2$. יחס הרקורסיה חייב להיות התוספת המדויקת של האיבר הבא בסדרה:

1. **חישוב ההפרש:** $f(n+1) - f(n)$ הוא האיבר הבא בסכום, שהוא $(n+1)^2$. (במקורות הוכח באופן פורמלי כי $f(n+1) - f(n) = (n+1)^2$).
2. **ניסוח רקורסיבי:** מכאן נגדיר את צעד הרקורסיה הפרימיטיבית: $$f(n+1) = f(n) + (n+1)^2$$

**שלב ג': הוכחת הר"פ-יות**

נציג את $f(n)$ בהתאם להגדרת הרקורסיה הפרימיטיבית (PRR):

1. **פונקציית הבסיס:** $f(0)=0$ (פונקציה ר"פ, כפי שצוין לעיל).
2. **פונקציית המעבר (המעבר $g$):** נגדיר את $g(n, y)$ באופן שבו $f(n+1) = g(n, f(n))$. $$g(n, y) = y + (n+1)^2$$ הפונקציה $g$ היא **ר"פ** כהרכבה של פונקציות ר"פ:
    - **פונקציית העוקב** ($n+1$).
    - **פונקציית הכפל** (או הריבוע, $x^2$) שהיא ר"פ.
    - **פונקציית החיבור** ($+$) שהיא ר"פ.

מאחר ש-$f$ מוגדרת על ידי רקורסיה פרימיטיבית של פונקציות ר"פ, הרי שהיא **פונקציה רקורסיבית פרימיטיבית**.



השיטה שתיארת מצוינת והיא **בדיוק** הדרך האלגברית הפורמלית למצוא את פונקציית הצעד $g$ ברקורסיה פרימיטיבית.

למעשה, מה שעשית הוא הוכחה פורמלית לכך שניתן לבטא את האיבר הבא באמצעות האיבר הקודם.

הנה הסבר מדוע השיטה שלך עובדת ומדוע היא שימושית במיוחד במקרים מסובכים, תוך קישור למקורות:

### 1. הרציונל: בידוד פונקציית הצעד

המטרה בהוכחת ר"פ היא למצוא פונקציה $g$ כך שיתקיים: $$f(n+1) = g(n, f(n))$$ במקרה של פונקציות סכום, אנו מניחים שהקשר הוא חיבורי, כלומר: $$f(n+1) = f(n) + \text{Something}$$ השיטה שלך מבצעת את הפעולה האלגברית הבאה:

1. מחשבים את $f(n+1)$.
2. מחסרים את $f(n)$.
3. מקבלים את ה-"Something" (ההפרש).
4. מעבירים אגף כדי לקבל את נוסחת הנסיגה: $f(n+1) = f(n) + \text{Difference}$.

שיטה זו תואמת בדיוק להגדרה הפורמלית של רקורסיה המופיעה במקורות, שם נדרש לבטא את הערך החדש כפונקציה של הערך הישן והאינדקס.

### 2. יישום השיטה שלך על דוגמת סכום הריבועים

בוא נראה איך השיטה שלך עובדת על הדוגמה הקודמת ($f(n) = \frac{n(n+1)(2n+1)}{6}$), ונראה שזה מוביל לאותה תוצאה אך בדרך אלגברית טהורה (שאינה דורשת "לנחש" שהאיבר הוא $n^2$):

1. **נציב $n+1$:** $$ f(n+1) = \frac{(n+1)((n+1)+1)(2(n+1)+1)}{6} = \frac{(n+1)(n+2)(2n+3)}{6} $$
    
2. **נבדוק את ההפרש $f(n+1) - f(n)$:** $$ \Delta = \frac{(n+1)(n+2)(2n+3)}{6} - \frac{n(n+1)(2n+1)}{6} $$
    
3. **נוציא גורם משותף $\frac{n+1}{6}$:** $$ \Delta = \frac{n+1}{6} \left[ (n+2)(2n+3) - n(2n+1) \right] $$
    
4. **נפתח סוגריים בתוך הסוגריים המרובעים:** $$ (2n^2 + 3n + 4n + 6) - (2n^2 + n) = 2n^2 + 7n + 6 - 2n^2 - n = 6n + 6 $$
    
5. **נציב חזרה:** $$ \Delta = \frac{n+1}{6} \cdot (6n+6) = \frac{n+1}{6} \cdot 6(n+1) = (n+1)(n+1) = (n+1)^2 $$
    
6. **העברת אגף (הגדרת הרקורסיה):** $$ f(n+1) - f(n) = (n+1)^2 \implies f(n+1) = f(n) + (n+1)^2 $$
    

**המסקנה:** קיבלנו בדיוק את אותו מכפיל/תוספת שידענו שצריך להיות שם, אבל הוכחנו אותו אלגברית. כעת קל להגדיר את $g(n, y) = y + (n+1)^2$, שהיא פונקציה ר"פ.

### מתי השיטה שלך עדיפה?

השיטה שלך ("הצב, חסר, העבר אגף") עדיפה כאשר:

1. **לא ברור מיידית מהו האיבר הכללי:** לפעמים הפונקציה נתונה בצורה סגורה מסובכת, וקשה לראות בעין מהו האיבר שנוסף בסכום. האלגברה "מחלצת" אותו עבורך.
2. **הוכחת נכונות:** במבחן, חישוב ההפרש הוא הוכחה פורמלית לכך שהרקורסיה שבנית אכן שקולה לפונקציה המקורית (כפי שנדרש לעיתים להוכיח נכונות).

### סיכום

הדרך שלך היא הדרך ה"בטוחה" והמתמטית לבנות את הרקורסיה.

- עבור **סכום**, מבצעים $f(n+1) - f(n)$.
- עבור **מכפלה** (כמו עצרת), מבצעים $f(n+1) / f(n)$.

בשני המקרים, המטרה היא לבודד את השינוי ולהגדיר אותו כפונקציית הצעד $g$.