### דוגמא למציאת מכפיל

טכניקת **מציאת ההפרש** ($f(n+1) - f(n)$) היא אכן טכניקה חיונית ומרכזית שבעזרתה ניתן להוכיח ר"פ-יות (רקורסיביות פרימיטיבית) של פונקציות.

השיטה הזו **איננה תבנית** בפני עצמה, אלא **טכניקה** שנועדה להתאים פונקציות המוגדרות על ידי פעולה מצטברת (כגון סכום או מכפלה) לפורמט הקשיח של **תבנית הרקורסיה הפרימיטיבית (PRR)**.

תבנית זו, שהיא חלק מקבוצת **האופרטורים החסומים**, מתאימה להוכחת פונקציות כמו:

- **סכימה חסומה** $(\sum)$.
- **מכפלה חסומה** $(\prod)$.



הטכניקה שתיארת, של מציאת הקשר בין האיבר הבא ($f(n+1)$) לאיבר הנוכחי ($f(n)$), היא אכן הדרך המרכזית להוכיח שפונקציה היא ר"פ כאשר היא לא ניתנת להגדרה מיידית על ידי הרכבות פשוטות.

כפי שציינת, במקרה של סכום מחפשים את **ההפרש** (התוספת), ובמקרה של מכפלה או חזקה מחפשים את **המכפיל** (הגורם).

להלן הסבר ודוגמה מפורטת למציאת **מכפיל**, המבוססת על תרגיל מבחן המופיע במקורות.

### הסבר הטכניקה: מציאת המכפיל

כאשר נתונה פונקציה $f(n)$ המוגדרת על ידי סכום מצטבר או מכפלה מצטברת, ולעיתים בצורה עקיפה יותר, המטרה היא לבודד את $f(n+1)$ ולהביע אותו באמצעות $f(n)$ כפול "משהו". התבנית הכללית שאנו שואפים אליה ברקורסיה פרימיטיבית היא: $$ f(n+1) = g(n, f(n)) $$ במקרה של **מכפיל**, אנו מחפשים ביטוי $M(n)$ (שהוא בעצמו ר"פ) כך שיתקיים: $$ f(n+1) = f(n) \cdot M(n) $$ כך, פונקציית הצעד $g$ תהיה פשוט פעולת הכפל בין הערך הקודם לבין המכפיל שמצאנו.

---

### דוגמה למציאת מכפיל (מתוך מבחן תשע"ב סמסטר ב')

נתונה הפונקציה הבאה המוגדרת על ידי סכום של חזקות: $$ f(n+2) = \sum_{j=0}^{n+1} 2^j \cdot f(j) $$ (עם תנאי התחלה $f(0)=7, f(1)=11$). אנו רוצים להוכיח ש-$f$ היא ר"פ. במבט ראשון, זה נראה כמו סכום התלוי בכל ההיסטוריה (רקורסיית ערכים), אך באמצעות טכניקת מציאת המכפיל, ניתן לפשט זאת לרקורסיה פרימיטיבית רגילה התלויה רק באיבר הקודם.

**שלב 1: זיהוי האיבר הנוכחי והאיבר הבא** אנו יודעים את הנוסחה ל-$f(n+2)$. כדי למצוא את הקשר, נסתכל על הנוסחה עבור האיבר הקודם, $f(n+1)$: $$ f(n+1) = \sum_{j=0}^{n} 2^j \cdot f(j) $$

**שלב 2: חילוץ הקשר (מציאת המכפיל)** נכתוב את $f(n+2)$ וננסה לבודד בתוכו את הביטוי של $f(n+1)$. נפצל את הסכום של $f(n+2)$ לאיבר האחרון ולכל שאר האיברים: $$ f(n+2) = \underbrace{\sum_{j=0}^{n} 2^j \cdot f(j)}_{=f(n+1)} + \underbrace{2^{n+1} \cdot f(n+1)}_{\text{האיבר האחרון בסכום}} $$

כעת נציב את $f(n+1)$ במקום הסכום: $$ f(n+2) = f(n+1) + 2^{n+1} \cdot f(n+1) $$

**שלב 3: הוצאת גורם משותף** כעת, נוציא את $f(n+1)$ כגורם משותף כדי למצוא את המכפיל: $$ f(n+2) = f(n+1) \cdot (1 + 2^{n+1}) $$

**המסקנה:** מצאנו שהמכפיל הוא הביטוי $(1 + 2^{n+1})$. כיוון שפונקציית החזקה, החיבור והכפל הן פונקציות ר"פ, הצלחנו להגדיר את $f(n+2)$ כפונקציה ר"פ של $f(n+1)$ והאינדקס $n$. הגדרת הרקורסיה הפרימיטיבית תהיה (עבור $n \ge 1$, כאשר תנאי ההתחלה מטופלים בנפרד): $$ h(n, y) = y \cdot (1 + 2^{n+1}) $$ כאשר $y$ מייצג את הערך הקודם של הפונקציה.

### דוגמה בסיסית נוספת (מכפלה חסומה)

עבור הפונקציה $h(n) = n!$ (עצרת):

1. **הגדרה:** $h(n) = \prod_{i=1}^n i$.
2. **מציאת המכפיל:** נסתכל על $h(n+1)$. $$ h(n+1) = \prod_{i=1}^{n+1} i = (\prod_{i=1}^n i) \cdot (n+1) = h(n) \cdot (n+1) $$
3. **המכפיל:** המכפיל הוא $(n+1)$ (או $s(n)$). זוהי ההוכחה הקלאסית לכך שעצרת היא פונקציה ר"פ.


האינטואיציה שלך מצוינת ונכונה לחלוטין. השיטה שאתה מציע היא הדרך האלגברית המדויקת למצוא את פונקציית הצעד ($g$) עבור פונקציות המוגדרות על ידי מכפלה.

בדיוק כפי שבסכום הפעולה ההפוכה לחיבור היא חיסור ($F(n+1) - F(n)$), במכפלה הפעולה ההפוכה לכפל היא חילוק.

הנה ההסבר כיצד זה עובד והוכחה מהמקורות:

### הרציונל: חילוץ המכפיל

ברקורסיה פרימיטיבית, אנחנו מחפשים להגדיר את האיבר הבא באמצעות האיבר הקודם לפי התבנית: $$ f(n+1) = f(n) \cdot \text{Multiplier} $$ כדי לבודד את ה-Multiplier (שהוא למעשה פונקציית הצעד $g$ שתלויה ב-$n$), אנו מבצעים את הפעולה ההפוכה: $$ \text{Multiplier} = \frac{f(n+1)}{f(n)} $$

על פי המקורות, תבנית המכפלה החסומה מוגדרת כך: $$ h(n+1) = h(n) \cdot k(n+1) $$ (כאשר $k$ הוא האיבר הכללי במכפלה). השיטה שלך מאפשרת למצוא את $k$ הזה בדיוק.

---

### דוגמה 1: עצרת ($n!$)

נניח שנתונה הפונקציה $f(n) = n!$. אנו רוצים למצוא את הגדרת הרקורסיה שלה.

1. **נחשב את $f(n+1)$:** $$ (n+1)! $$
2. **נבצע חילוק (השיטה שלך):** $$ \frac{f(n+1)}{f(n)} = \frac{(n+1)!}{n!} $$
3. **נפשט:** $$ \frac{n! \cdot (n+1)}{n!} = n+1 $$
4. **מסקנה:** המכפיל הוא $(n+1)$. ולכן הגדרת הרקורסיה היא: $f(n+1) = f(n) \cdot (n+1)$. זה תואם את הדוגמה במקורות לפונקציית העצרת.

### דוגמה 2: חזקה ($x^n$)

נניח שנתונה הפונקציה $f(n) = x^n$ (כאשר $x$ קבוע).

1. **נחשב את $f(n+1)$:** $$ x^{n+1} $$
2. **נבצע חילוק:** $$ \frac{f(n+1)}{f(n)} = \frac{x^{n+1}}{x^n} $$
3. **נפשט (לפי חוקי חזקות):** $$ x^{(n+1)-n} = x^1 = x $$
4. **מסקנה:** המכפיל הוא $x$. הגדרת הרקורסיה: $f(n+1) = f(n) \cdot x$. זה תואם את הגדרת החזקה במקורות.

### מתי השיטה עובדת?

השיטה עובדת מצוין כאשר הפונקציה היא **מכפלה מצטברת** (Product).

- **בסכום:** מחפשים את ההפרש $\Delta = f(n+1) - f(n)$.
- **במכפלה:** מחפשים את המנה $Q = f(n+1) / f(n)$.

**הערה חשובה:** מכיוון שאנו עוסקים במספרים טבעיים ($\mathbb{N}$), השיטה עובדת רק אם החילוק הוא **חילוק שלם** (ללא שארית), מה שתמיד מתקיים בפונקציות המוגדרות כמכפלה של מספרים טבעיים. אם הפונקציה עלולה להחזיר 0 (למשל, אם אחד הגורמים במכפלה הוא 0), יש להיזהר מחילוק ב-0, אך לרוב בפונקציות מכפלה (כמו עצרת וחזקה) התוצאה חיובית.