הוכחת ר"פ באמצעות גדל לאינסוף צעדים אחורה:

# קידוד גדל: פתרון לתלות בהיסטוריה אינסופית

כאשר מגדירים פונקציה רקורסיבית $f(n)$ שבה הערך החדש תלוי ב**כל** הערכים הקודמים ($f(0), \dots, f(n-1)$) – ולא רק בערך האחרון – נוצרת בעיה בהגדרה הסטנדרטית של רקורסיה פרימיטיבית, המאפשרת גישה רק לערכים קודמים בודדים.

הפתרון הוא שימוש ב**קידוד גדל (Gödel Numbering)** כדי "לדחוס" את כל ההיסטוריה של הפונקציה למספר יחיד, המועבר משלב לשלב.

---

### 1. המנגנון: פונקציית ההיסטוריה $H(n)$

אנו מגדירים פונקציית עזר, $H(n)$, שתפקידה להחזיק את רשימת כל הערכים שחושבו עד כה.

הגדרת $H(n)$:

$$H(n) = [f(0), f(1), \dots, f(n)] = \prod_{i=1}^{n+1} p_i^{f(i-1)}$$

כאשר $p_i$ הוא הראשוני ה-$i$-י ($p_1=2, p_2=3, \dots$).

למה זה עובד?

פונקציית ההיסטוריה $H(n)$ ניתנת להגדרה כרקורסיה פרימיטיבית סטנדרטית, מכיוון שערכה החדש $H(n+1)$ תלוי רק בערכה הקודם $H(n)$ ובערך החדש $f(n+1)$.

---

### 2. תבנית ההוכחה (צעד-אחר-צעד)

כדי להוכיח ש-$f(n)$ היא ר"פ, נפעל לפי השלבים הבאים:

#### שלב א': הוכחת ר"פ עבור $H(n)$

נגדיר את $H(n)$ ברקורסיה:

1. בסיס ($n=0$):
    
    $$H(0) = [f(0)] = 2^{f(0)}$$
    
    מחשבים את הערך ההתחלתי $f(0)$ (לרוב נתון או קבוע), ומציבים בחזקת 2. זוהי פעולה ר"פ.
    
2. צעד הרקורסיה ($H(n+1)$):
    
    הנוסחה לעדכון ההיסטוריה היא:
    
    $$H(n+1) = H(n) \cdot p_{n+2}^{f(n+1)}$$
    
    כדי שצעד זה יהיה ר"פ, עלינו להראות שניתן לחשב את המעריך $f(n+1)$ באמצעות פונקציות ר"פ על $H(n)$ ו-$n$.
    
    - חילוץ ערכים קודמים: כל ערך $f(j)$ (עבור $j \le n$) ניתן לחילוץ מתוך $H(n)$ באמצעות פונקציית הפיענוח $(x)_i$:
        
        $$f(j) = (H(n))_{j+1}$$
        
    - **חישוב הערך החדש:** מציבים את הערכים המחולצים בנוסחה המקורית של $f(n+1)$ (למשל, בתוך סכום $\Sigma$ או מכפלה $\Pi$). מכיוון שסכום חסום, כפל והרכבה הם ר"פ, הביטוי כולו ר"פ.
        

#### שלב ב': חילוץ הפונקציה המקורית

לאחר שהוכחנו ש-$H(n)$ היא ר"פ, נגדיר את $f(n)$ כחילוץ האיבר האחרון מההיסטוריה:

$$f(n) = (H(n))_{n+1}$$

מכיוון ש-$H(n)$ ר"פ ופונקציית הפיענוח ר"פ, נובע ש-$f(n)$ היא רקורסיבית פרימיטיבית.

---

### 3. דוגמה מעשית: רקורסיה עם סכום היסטוריה

השאלה: נתונה הפונקציה:

$$\begin{cases} f(0)=5 \\ f(n+1) = 2 \cdot \sum_{j=0}^{n} j \cdot f(j) & \text{עבור } n \ge 0 \end{cases}$$

הוכיחו ש-$f$ היא ר"פ.

**פתרון:**

1. **הגדרת $H(n)$:** נגדיר $H(n) = [f(0), \dots, f(n)]$.
    
2. **בסיס הרקורסיה:** $H(0) = 2^{f(0)} = 2^5 = 32$. (ר"פ כקבוע).
    
3. צעד הרקורסיה:
    
    $$H(n+1) = H(n) \cdot p_{n+2}^{f(n+1)}$$
    
    נבטא את $f(n+1)$ באמצעות $H(n)$:
    
    $$f(n+1) = 2 \cdot \sum_{j=0}^{n} j \cdot (H(n))_{j+1}$$
    
    - הביטוי $(H(n))_{j+1}$ הוא ר"פ (פיענוח).
        
    - הסכום $\sum_{j=0}^n$ הוא סכימה חסומה (ר"פ).
        
    - לכן, $f(n+1)$ המחושב מתוך $H(n)$ הוא ר"פ, והגדרת $H(n+1)$ כולה חוקית ור"פ.
        
1. **סיום:** $f(n) = (H(n))_{n+1}$, ולכן $f$ היא ר"פ.


### חלק ב': היסטוריה מלאה (אינסוף צעדים אחורה)

**שימוש בקידוד גדל $[x_1, \dots, x_k]$**

מתאים לפונקציות שבהן $f(n+1)$ תלוי ב**סכום**, **מכפלה** או מניפולציה על **כל** הערכים הקודמים $f(0) \dots f(n)$.

#### 1. הרעיון המרכזי

מכיוון שמספר הערכים הולך וגדל עם $n$, זוג אינו מספיק. נשתמש בקידוד גדל שמאפשר לדחוס סדרה באורך משתנה למספר יחיד.

הגדרת פונקציית העזר (ההיסטוריה):

$$H(n) = [f(0), f(1), \dots, f(n)] = \prod_{i=1}^{n+1} p_i^{f(i-1)}$$

#### 2. תבנית ההוכחה (דוגמה: רקורסיה עם סכום)

נתונה פונקציה: $f(n+1) = \sum_{j=0}^{n} f(j)$ (עם תנאי התחלה $f(0)$).

שלב 1: בסיס הרקורסיה

$$H(0) = [f(0)] = 2^{f(0)}$$

(מחשבים ערך מספרי לפי תנאי ההתחלה).

שלב 2: צעד הרקורסיה

הנוסחה לעדכון רשימת ההיסטוריה היא תמיד:

$$H(n+1) = H(n) \cdot p_{n+2}^{f(n+1)}$$

האתגר הוא להראות שהמעריך, $f(n+1)$, הוא ר"פ.

1. **גישה לערכים קודמים:** כל ערך $f(j)$ בהיסטוריה זמין לנו ע"י פונקציית הפיענוח $(H(n))_{j+1}$.
    
2. חישוב הערך החדש:
    
    $$f(n+1) = \sum_{j=0}^{n} (H(n))_{j+1}$$
    
    מכיוון שסכימה חסומה ופיענוח גדל הם ר"פ, הביטוי כולו ר"פ.
    
3. **עדכון:** מכפילים את $H(n)$ בראשוני הבא בחזקת התוצאה שחישבנו.
    

שלב 3: חילוץ

$$f(n) = (H(n))_{n+1}$$

לכן $f(n)$ היא ר"פ.

---

### סיכום: מתי משתמשים במה?
