
---

# הוכחת ר"פ לפונקציות עם תלות בהיסטוריה

הגדרת הרקורסיה הפרימיטיבית (ר"פ) הסטנדרטית מאפשרת לחשב את הערך הבא $f(n+1)$ בהתבסס אך ורק על האינדקס $n$ והערך הקודם המיידי $f(n)$.

כאשר הפונקציה תלויה בערכים קודמים נוספים ($f(n-1)$) או בכל ההיסטוריה, עלינו להשתמש בפונקציית עזר (קידוד) שתדחוס את המידע הדרוש לתוך משתנה יחיד.

---

### חלק א': היסטוריה סופית (2 צעדים אחורה)

**שימוש בפונקציית הזיווג $\langle x, y \rangle$**

מתאים לפונקציות כמו פיבונאצ'י או כל פונקציה מהצורה $f(n+2) = Op(f(n+1), f(n))$.

#### 1. הרעיון המרכזי

אנו בונים פונקציית עזר $H(n)$ שתחזיק בכל רגע נתון **זוג** ערכים: את הערך הנוכחי ואת הערך הבא. כך, המעבר מ-$H(n)$ ל-$H(n+1)$ יהיה תלוי רק ב-$H(n)$.

הגדרת פונקציית העזר:

$$H(n) = \langle f(n), f(n+1) \rangle$$

#### 2. תבנית ההוכחה (דוגמה: $f(n+2) = 2f(n) + 3f(n+1)$)

נתונה הפונקציה:

$$f(x) = \begin{cases} 1 & x=0, 1 \\ 2f(x-2) + 3f(x-1) & x>1 \end{cases}$$

שלב 1: בסיס הרקורסיה ($n=0$)

נחשב את הערך עבור תנאי ההתחלה הנתונים:

$$H(0) = \langle f(0), f(1) \rangle = \langle 1, 1 \rangle$$

זהו ערך קבוע, ולכן ר"פ.

שלב 2: צעד הרקורסיה (מעבר מ-$H(n)$ ל-$H(n+1)$)

אנו רוצים לקבל: $H(n+1) = \langle f(n+1), f(n+2) \rangle$.

לשם כך, נחלץ את המידע מתוך $H(n)$ ונחשב את האיבר החדש.

1. **חילוץ נתונים:** נשתמש בפונקציות הפיענוח הר"פ $l(z)$ (שמאל) ו-$r(z)$ (ימין):
    
    - $f(n) = l(H(n))$
        
    - $f(n+1) = r(H(n))$
        
2. חישוב הערך החדש $f(n+2)$:
    
    נציב את החילוץ בנוסחת הרקורסיה:
    
    $$f(n+2) = 2 \cdot f(n) + 3 \cdot f(n+1) = 2 \cdot l(H(n)) + 3 \cdot r(H(n))$$
    
    זוהי הרכבה של פונקציות ר"פ (כפל, חיבור, $l, r$).
    
3. הרכבת הזוג החדש:
    
    $$H(n+1) = \langle r(H(n)), \quad 2 \cdot l(H(n)) + 3 \cdot r(H(n)) \rangle$$
    

מסקנה: $H(n)$ מוגדרת ברקורסיה פרימיטיבית.

שלב 3: חילוץ הפונקציה המקורית

$$f(n) = l(H(n))$$

לכן $f(n)$ היא ר"פ.

---
